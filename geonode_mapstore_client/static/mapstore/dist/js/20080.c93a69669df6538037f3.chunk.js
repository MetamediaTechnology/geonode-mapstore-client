(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[20080],{242780:(e,t,n)=>{"use strict";n.d(t,{Xp:()=>i,A1:()=>a,Mf:()=>l,wq:()=>c,CD:()=>u,DX:()=>s,GW:()=>p,c4:()=>f,Ne:()=>y,hv:()=>m,x9:()=>d,Lv:()=>b,mA:()=>h,Ge:()=>g,sL:()=>v,B6:()=>O,vG:()=>S,QY:()=>E,X2:()=>T,dC:()=>N,bO:()=>A,eY:()=>w,bI:()=>P,Rr:()=>j,Np:()=>I,pC:()=>x,cM:()=>_,iO:()=>C,R_:()=>L,zT:()=>R,$l:()=>M,qO:()=>D,eK:()=>k,HN:()=>G,Bm:()=>z,Kz:()=>Z,gT:()=>F,JT:()=>U,CO:()=>B,NV:()=>H,Ns:()=>W,Fz:()=>Y,Nj:()=>V,op:()=>X,GI:()=>q,Cg:()=>$,WD:()=>K,rb:()=>Q,it:()=>J,br:()=>ee,Hf:()=>te,Ps:()=>ne,U7:()=>re,aH:()=>oe,qX:()=>ie,cv:()=>ae,M_:()=>le,QT:()=>ce,z_:()=>ue,Y5:()=>se,wP:()=>pe,pv:()=>fe,bM:()=>ye,Zw:()=>me,Ay:()=>de,aS:()=>be,LR:()=>he,VR:()=>ge,A9:()=>ve,i9:()=>Oe,$f:()=>Se,F4:()=>Ee,r1:()=>Te,Om:()=>Ne,_x:()=>Ae,dT:()=>we,jw:()=>Pe,iY:()=>je,QD:()=>Ie,xD:()=>xe,kg:()=>_e,ob:()=>Ce,nk:()=>Le,A_:()=>Re,nY:()=>Me,Bp:()=>De,CH:()=>ke,Rx:()=>Ge,MQ:()=>ze,l7:()=>Ze,VP:()=>Fe,g:()=>Ue,L0:()=>Be,if:()=>He,tp:()=>We,TA:()=>Ye,yg:()=>Ve,Hl:()=>Xe,y$:()=>qe,ts:()=>$e,UJ:()=>Ke,yw:()=>Qe,nz:()=>Je,RC:()=>et,om:()=>tt,XW:()=>nt,WB:()=>rt,pI:()=>ot,Dd:()=>it,V_:()=>at,TW:()=>lt,$:()=>ct,Y_:()=>ut,Ib:()=>st,_n:()=>pt});var r=n(91175),o=n.n(r),i="ANNOTATIONS:INIT_PLUGIN",a="ANNOTATIONS:EDIT",l="ANNOTATIONS:OPEN_EDITOR",c="ANNOTATIONS:SHOW",u="ANNOTATIONS:NEW",s="ANNOTATIONS:REMOVE",p="ANNOTATIONS:REMOVE_GEOMETRY",f="ANNOTATIONS:CONFIRM_REMOVE",y="ANNOTATIONS:CANCEL_REMOVE",m="ANNOTATIONS:CANCEL_EDIT",d="ANNOTATIONS:CANCEL_SHOW",b="ANNOTATIONS:SAVE",h="ANNOTATIONS:TOGGLE_ADD",g="ANNOTATIONS:TOGGLE_STYLE",v="ANNOTATIONS:SET_STYLE",O="ANNOTATIONS:RESTORE_STYLE",S="ANNOTATIONS:SET_INVALID_SELECTED",E="ANNOTATIONS:VALIDATION_ERROR",T="ANNOTATIONS:HIGHLIGHT",N="ANNOTATIONS:CLEAN_HIGHLIGHT",A="ANNOTATIONS:FILTER",w="ANNOTATIONS:CLOSE",P="ANNOTATIONS:CONFIRM_CLOSE",j="ANNOTATIONS:CANCEL_CLOSE",I="ANNOTATIONS:START_DRAWING",x="ANNOTATIONS:UNSAVED_CHANGES",_="ANNOTATIONS:VISIBILITY",C="ANNOTATIONS:TOGGLE_CHANGES_MODAL",L="ANNOTATIONS:TOGGLE_GEOMETRY_MODAL",R="ANNOTATIONS:CHANGED_PROPERTIES",M="ANNOTATIONS:UNSAVED_STYLE",D="ANNOTATIONS:TOGGLE_STYLE_MODAL",k="ANNOTATIONS:ADD_TEXT",G="ANNOTATIONS:DOWNLOAD",z="ANNOTATIONS:LOAD_ANNOTATIONS",Z="ANNOTATIONS:CHANGED_SELECTED",F="ANNOTATIONS:RESET_COORD_EDITOR",U="ANNOTATIONS:CHANGE_RADIUS",B="ANNOTATIONS:CHANGE_TEXT",H="ANNOTATIONS:ADD_NEW_FEATURE",W="ANNOTATIONS:SET_EDITING_FEATURE",Y="ANNOTATIONS:HIGHLIGHT_POINT",V="ANNOTATIONS:TOGGLE_DELETE_FT_MODAL",X="ANNOTATIONS:CONFIRM_DELETE_FEATURE",q="ANNOTATIONS:CHANGE_FORMAT",$="ANNOTATIONS:UPDATE_SYMBOLS",K="ANNOTATIONS:ERROR_SYMBOLS",Q="ANNOTATIONS:SET_DEFAULT_STYLE",J="ANNOTATIONS:LOAD_DEFAULT_STYLES",ee="ANNOTATIONS:LOADING",te="ANNOTATIONS:CHANGE_GEOMETRY_TITLE",ne="ANNOTATIONS:FILTER_MARKER",re="ANNOTATIONS:HIDE_MEASURE_WARNING",oe="ANNOTATIONS:TOGGLE_SHOW_AGAIN",ie="ANNOTATIONS:GEOMETRY_HIGHLIGHT",ae="ANNOTATIONS:UNSELECT_FEATURE",le="ANNOTATIONS:VALIDATE_FEATURE",ce=function(){return{type:i}},ue=function(){return{type:$,symbols:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},se=function(e){return{type:K,symbolErrors:e}},pe=function(e){return{type:z,features:e,override:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},fe=function(){return{type:X}},ye=function(e){return{type:l,id:e}},me=function(e){return{type:q,format:e}},de=function(){return{type:V}},be=function(e){return{type:Y,point:e}},he=function(e){return{type:G,annotation:e}},ge=function(e){return function(t,n){var r=o()(o()(n().layers.flat.filter((function(e){return"annotations"===e.id}))).features.filter((function(t){return t.properties.id===e})));"FeatureCollection"===r.type?t({type:a,feature:r,featureType:r.type}):t({type:a,feature:r,featureType:r.geometry.type})}},ve=function(){return{type:u}},Oe=function(e,t,n,r){return{type:Z,coordinates:e,radius:t,text:n,crs:r}},Se=function(e,t){return{type:S,errorFrom:e,coordinates:t}},Ee=function(){return{type:k}},Te=function(e,t){return{type:_,id:e,visibility:t}},Ne=function(e,t){return{type:R,field:e,value:t}},Ae=function(e){return{type:s,id:e}},we=function(e){return{type:p,id:e}},Pe=function(e,t){return{type:f,id:e,attribute:t}},je=function(){return{type:y}},Ie=function(e){return{type:m,properties:e}},xe=function(e,t,n,r,o,i){return{type:b,id:e,fields:t,geometry:n,style:r,newFeature:o,properties:i}},_e=function(e){return{type:h,featureType:e}},Ce=function(e){return{type:g,styling:e}},Le=function(){return{type:O}},Re=function(e){return{type:v,style:e}},Me=function(e,t,n){return{type:"ANNOTATIONS:UPDATE_GEOMETRY",geometry:e,textChanged:t,circleChanged:n}},De=function(e){return{type:E,errors:e}},ke=function(e){return{type:T,id:e}},Ge=function(){return{type:N}},ze=function(e){return{type:c,id:e}},Ze=function(){return{type:d}},Fe=function(e){return{type:A,filter:e}},Ue=function(){return{type:w}},Be=function(e){return{type:P,properties:e}},He=function(e){return{type:x,unsavedChanges:e}},We=function(e){return{type:M,unsavedStyle:e}},Ye=function(){return{type:H}},Ve=function(e){return{type:W,feature:e}},Xe=function(){return{type:j}},qe=function(){return{type:I,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},$e=function(){return{type:C}},Ke=function(){return{type:L}},Qe=function(){return{type:D}},Je=function(){return{type:F}},et=function(){return{type:ae}},tt=function(e,t,n){return{type:U,radius:e,components:t,crs:n}},nt=function(e,t){return{type:B,text:e,components:t}},rt=function(e,t){return{type:Q,path:e,style:t}},ot=function(e,t,n,r,o){return{type:J,shape:e,size:t,fillColor:n,strokeColor:r,symbolsPath:o}},it=function(e){return{type:te,title:e}},at=function(e){return{type:ee,name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading",value:e}},lt=function(e){return{type:ne,filter:e}},ct=function(e,t){return{type:ie,id:e,state:t}},ut=function(){return{type:re}},st=function(){return{type:oe}},pt=function(){return{type:le}}},12440:(e,t,n)=>{"use strict";n.d(t,{p5:()=>r,aW:()=>o,kn:()=>i,br:()=>a,aE:()=>l,vm:()=>c,H4:()=>u,_p:()=>s,_H:()=>p,j7:()=>f,wg:()=>y,qQ:()=>m,K4:()=>d,_W:()=>b,Jd:()=>h,wD:()=>g,bM:()=>v,yW:()=>O});var r="IMPORT::SET_LAYERS",o="IMPORT::ON_ERROR",i="IMPORT::ON_SELECT_LAYER",a="IMPORT::LOADING",l="IMPORT::ON_LAYER_ADDED",c="IMPORT::UPDATE_BBOX",u="IMPORT::ON_SUCCESS",s="ON_SHAPE_ERROR",p="IMPORT::ON_LAYER_SKIPPED";function f(e,t){return{type:r,layers:e,errors:t}}function y(e){return{type:i,layer:e}}function m(e){return{type:o,error:e}}function d(e){return{type:a,status:e}}function b(e){return{type:l,layer:e}}function h(e){return{type:c,bbox:e}}function g(e){return{type:u,message:e}}function v(e){return{type:s,message:e}}function O(e){return{type:p,layer:e}}},442416:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,q:()=>o});var r="SET_STYLE_PARAMETER";function o(e,t){return{type:r,name:e,value:t}}},615402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var y=n(868195).FormattedHTMLMessage,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,n,r,o,i=(r=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(r);if(o){var n=s(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),i.apply(this,arguments)}return t=p,(n=[{key:"render",value:function(){return this.context.intl?a().createElement(y,{id:this.props.msgId,values:this.props.msgParams}):a().createElement("span",null,this.props.msgId||"")}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(a().Component);p(m,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),p(m,"contextTypes",{intl:o().object});const d=m},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:u({width:t,height:t,overflow:"hidden"},r)},!i&&a().createElement("div",{className:"mapstore-".concat(p(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const y=f},61018:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(124852),o=n.n(r),i=n(807472),a=n(757588);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var c=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,l=e.modal,s=e.draggable,f=void 0!==s&&s,y=e.closeGlyph,m=void 0===y?"1-close":y,d=e.closable,b=void 0===d||d,h=e.onClose,g=void 0===h?function(){}:h,v=e.title,O=e.header,S=e.footer,E=e.children,T=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return t?o().createElement(i.Z,u({modal:l,onClickOut:b&&l?function(){return g()}:null,style:p(p({},r),{},{display:t?"block":"none"}),draggable:f},T),o().createElement("span",{role:"header"},v||O||o().createElement("span",null," "),b?o().createElement("button",{onClick:function(){return g()},className:"settings-panel-close close"},o().createElement(a.Glyphicon,{glyph:m})):null),o().createElement("span",{role:"body"},E),S?o().createElement("span",{role:"footer"},S):null):null}},420080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(124852),o=n.n(r),i=n(171703),a=n(481756),l=n(12440),c=n(197395),u=n(801550),s=n(580416),p=n(242780),f=n(673781),y=n(782904),m=n(727418),d=n.n(m),b=n(757588),h=n(93152);const g={MapImportPlugin:d()({loadPlugin:function(e){Promise.resolve().then(function(){var t=n(837075).default,r=(0,i.connect)((function(e){return{enabled:e.controls&&e.controls.mapimport&&e.controls.mapimport.enabled,layers:e.mapimport&&e.mapimport.layers||null,selected:e.mapimport&&e.mapimport.selected||null,bbox:e.mapimport&&e.mapimport.bbox||null,success:e.mapimport&&e.mapimport.success||null,errors:e.mapimport&&e.mapimport.errors||null,shapeStyle:e.style||{},mapType:(0,h.$v)(e),annotationsLayer:(0,f.sB)(e)}}),{setLayers:l.j7,onLayerAdded:l._W,onLayerSkipped:l.yW,onSelectLayer:l.wg,onError:l.qQ,onSuccess:l.wD,addLayer:s.A4,loadAnnotations:p.wP,onZoomSelected:u.Px,updateBBox:l.Jd,setLoading:l.K4,onClose:y.Xi.bind(null,"mapimport",null),warning:c.Kp})(t);e(r)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.mapimport&&e.mapimport.enabled||e.toolbar&&"import"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"import",position:4,text:o().createElement(a.Z,{msgId:"mapImport.title"}),tooltip:"mapImport.tooltip",icon:o().createElement(b.Glyphicon,{glyph:"upload"}),action:y.Xi.bind(null,"mapimport",null),priority:2,doNotHide:!0}}),reducers:{mapimport:n(183807).Z,style:n(318323).Z}}},837075:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>lt});var r=n(867076),o=n(22222),i=n(124852),a=n.n(i),l=n(855033),c=n.n(l),u=n(757588),s=n(282467),p=(0,n(815135).Z)(s.Z);const f=function(e){var t=e.accept,n=e.children,r=e.onRef,o=void 0===r?function(){}:r,i=e.onClose,l=void 0===i?function(){}:i,s=e.onDrop,f=void 0===s?function(){}:s,y=e.onDragEnter,m=void 0===y?function(){}:y,d=e.onDragLeave,b=void 0===d?function(){}:d;return a().createElement(c(),{disableClick:!0,ref:o,id:"DRAGDROP_IMPORT_ZONE",style:{position:"relative",height:"100%"},accept:t,onDrop:f,onDragEnter:m,onDragLeave:b},a().createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},a().createElement(p,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return l()}},a().createElement(u.Glyphicon,{glyph:"1-close"})),a().createElement("div",{style:{margin:"auto",maxWidth:550}},n)))};var y=n(532425),m=n(805346),d=n(615402);const b=function(e){var t=e.openFileDialog;return a().createElement("div",null,a().createElement(d.Z,{msgId:"mapImport.dropZone.heading"}),t?a().createElement(s.Z,{bsStyle:"primary",onClick:t},a().createElement(m.Z,{msgId:"mapImport.dropZone.selectFiles"})):null,a().createElement("br",null),a().createElement("br",null),a().createElement(d.Z,{msgId:"mapImport.dropZone.infoSupported"}),a().createElement("hr",null),a().createElement(d.Z,{msgId:"mapImport.dropZone.note"}))};var h=["error"];var g={FILE_NOT_SUPPORTED:a().createElement(m.Z,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:a().createElement(m.Z,{msgId:"mapImport.errors.projectionNotSupported"})};const v=(0,r.compose)((0,r.branch)((function(e){return e.loading}),(0,r.renderComponent)((function(){return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement(y.Z,{size:80,color:"#ffffff",style:{margin:"auto"}}),a().createElement("h4",null,a().createElement(m.Z,{msgId:"loading"})))}))),(0,r.branch)((function(e){return e.error}),(0,r.renderComponent)((function(e){var t=e.error,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h);return a().createElement("div",{style:{margin:"auto",maxWidth:550}},a().createElement("div",null,a().createElement(u.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:80}})),a().createElement("h5",null,function(e){return e?g[e.message]||g[e]||a().createElement("span",null,a().createElement(m.Z,{msgId:"mapImport.errors.unknownError"}),":",a().createElement(u.Alert,{bsStyle:"warning"},e.message)):a().createElement(m.Z,{msgId:"mapImport.errors.unknownError"})}(t)),a().createElement(b,n))}))))((function(e){return a().createElement("div",null,a().createElement("div",null,a().createElement(u.Glyphicon,{glyph:"upload",style:{fontSize:80}})),a().createElement(b,e))}));var O=n(966085),S=n.n(O),E=n(500711),T=n.n(E),N=n(227361),A=n.n(N),w=n(359704),P=n.n(w),j=n(49977),I=n.n(j),x=n(658767),_=n(737275),C=n(989077),L=n(624262);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==R(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===R(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){return new Promise((function(t,n){var r=(0,C.jU)(e.name),o=e.type||C.Yf[r];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o?t(e):function(e){return(0,C.xp)(e).then((function(e){return(new(S())).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return n(new Error("FILE_NOT_SUPPORTED"))}))}))};const Z=(0,r.compose)((0,r.mapPropsStream)((function(e){var t=(0,r.createEventHandler)(),n=t.handler,o=t.stream,i=(0,r.createEventHandler)(),a=i.handler,l=i.stream;return e.combineLatest(o.switchMap((function(e){return I().Observable.from(e).flatMap(z).flatMap(function(e){return function(t){var n=(0,C.jU)(t.name),r=t.type||C.Yf[n],o=_.ZP.getConfigProp("projectionDefs")||[],i=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===r?(0,C.BP)(t).then((function(e){return(0,C.bf)(e)})):"application/gpx+xml"===r?(0,C.BP)(t).then((function(e){return(0,C.cX)(e,t.name)})):"application/vnd.google-earth.kmz"===r?(0,C.N)(t).then((function(e){return(0,C.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,C.xp)(t).then((function(n){return(0,C.Lz)(n).then((function(r){r.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=(0,C.mr)(n).map((function(e){return k(k({},e),{},{filename:t.name})}));if(P()(o,(function(e){return!!A()(e,"map.projection")}))){var a=o.filter((function(e){return!!A()(e,"map.projection")}));if(T()(a,(function(e){return i.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===r?(0,C.zr)(t).then((function(e){var n=A()(e,"map.projection");if(n){if(i.includes(n))return[k(k({},e),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[k(k({},e),{},{fileName:t.name})]})):"application/vnd.wmc"===r?(0,C.IN)(t).then((function(e){return[k(k({},e),{},{fileName:t.name})]})):null}}(a)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return(0,x.Ag)(e)?{name:"Annotations",features:(null==e?void 0:e.features)||[],filename:e.filename}:k(k({},(0,L.Rt)(e)),{},{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return I().Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return k(k(k({},e),t),{},{onDrop:n})})).combineLatest(l.scan((function(){var e,t=arguments.length>1?arguments[1]:void 0;return[].concat(function(e){if(Array.isArray(e))return M(e)}(e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t])}),[]).startWith(void 0),(function(e,t){return k(k({},e),{},{warnings:t})}))})));var F=n(986267);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==U(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===U(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y=(0,r.compose)((0,r.withHandlers)({useFiles:function(e){var t=e.currentMap,n=e.loadMap,r=void 0===n?function(){}:n,o=e.loadMapInfo,i=void 0===o?function(){}:o,a=e.onClose,l=void 0===a?function(){}:a,c=e.setLayers,u=void 0===c?function(){}:c,s=e.annotationsLayer,p=e.loadAnnotations,f=void 0===p?function(){}:p,y=e.warning,m=void 0===y?function(){}:y;return function(e,n){var o=e.layers,a=void 0===o?[]:o,c=e.maps,p=(void 0===c?[]:c)[0];if(p){var y=t.zoom,d=t.center,b=t.mapId,h=p.fileName;r(H(H({},p),{},{map:H(H({},p.map),{},{zoom:p.map.zoom||y,center:p.map.center||d})}),b||null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent})),b&&h&&i(b),l()}if(a.length>0){var g=a&&"Annotations"===a[0].name;if(!s&&g)f(a[0].features,!1),l();else{var v=[];a.forEach((function(e){var t;"vector"!==e.type||(0,F.checkIfLayerFitsExtentForProjection)(e)?v.push(e):m({title:"notification.warning",message:"mapImport.errors.fileBeyondBoundaries",autoDismiss:6,position:"tc",values:{filename:null!==(t=e.name)&&void 0!==t?t:" "}})})),u(v,n)}}}}}),(0,r.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,n=e.useFiles,r=void 0===n?function(){}:n,o=e.warnings;return r(t,void 0===o?[]:o)})).ignoreElements())}))),V=(0,r.compose)((0,r.withHandlers)((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})));var X=["onClose","onDrop","onRef"];const q=(0,r.compose)(Z,Y,V)((function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.onDrop,o=void 0===r?function(){}:r,i=e.onRef,l=void 0===i?function(){}:i,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,X);return a().createElement(f,{onClose:n,onDrop:o,onRef:l},a().createElement(v,c))}));var $=n(171703),K=n(675263),Q=n.n(K),J=n(481756),ee=n(12440),te=n(442416),ne=n(747037),re=n.n(ne),oe=n(200020),ie=n(86638),ae=n(472986),le=n.n(ae),ce=n(882702);function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,de(r.key),r)}}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function me(e,t,n){return(t=de(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e){var t=function(e,t){if("object"!==ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ue(t)?t:String(t)}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(r);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(fe(e=i.call.apply(i,[this].concat(n))),"tryUnzip",(function(e){return(0,C.xp)(e).then((function(e){return(new(S())).loadAsync(e)}))})),me(fe(e),"checkFileType",(function(t){return new ce.Promise((function(n,r){var o=(0,C.jU)(t.name),i=t.type||C.Yf[o];"application/x-zip-compressed"===i||"application/zip"===i||"application/vnd.google-earth.kml+xml"===i||"application/vnd.google-earth.kmz"===i||"application/gpx+xml"===i?n():e.tryUnzip(t).then(n).catch(r)}))})),me(fe(e),"checkfile",(function(t){ce.Promise.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=(0,ie.S$)(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return t=l,(n=[{key:"render",value:function(){return this.props.loading?a().createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",a().createElement(le(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):a().createElement(c(),{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},a().createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&se(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);me(be,"propTypes",{text:Q().oneOfType([Q().string,Q().element]),loading:Q().bool,onShapeChoosen:Q().func,onShapeError:Q().func,error:Q().oneOfType([Q().string,Q().element]),errorMessage:Q().string}),me(be,"contextTypes",{messages:Q().object}),me(be,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"});const he=be;function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ne(e,t,n){return(t=Ae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ge(t)?t:String(t)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ne(Ee(e=i.call.apply(i,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),Ne(Ee(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),Ne(Ee(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),Ne(Ee(e),"renderError",(function(){return a().createElement(u.Row,null,a().createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},a().createElement(m.Z,{msgId:e.props.error})))})),Ne(Ee(e),"renderSuccess",(function(){return a().createElement(u.Row,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),Ne(Ee(e),"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),Ne(Ee(e),"renderDefaultStyle",(function(){return e.props.selected?a().createElement(u.Row,null,a().createElement(u.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.defaultStyle"}))),a().createElement(u.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.zoom"})))):null})),Ne(Ee(e),"addShape",(function(t){e.props.shapeLoading(!0);var n=e.props.readFiles(t,e.props.onShapeError);ce.Promise.all(n).then((function(t){var n=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));n=n.reduce((function(t,n){return n?t.concat(n.map((function(t){return(0,L.Rt)(t,e.props.createId(t,n))}))):t}),[]),e.props.onShapeChoosen(n),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var n=t&&t.name||t||"";re()(n)&&"SyntaxError"===n?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),Ne(Ee(e),"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;ce.Promise.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+(0,ie.S$)(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return t=l,(n=[{key:"render",value:function(){var e=this;return a().createElement(u.Grid,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(u.Row,{style:{textAlign:"center"}},this.props.selected?a().createElement(oe.DropdownList,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):a().createElement(he,ve({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),a().createElement(u.Row,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?a().createElement(u.Row,null,a().createElement(u.Col,{xsOffset:6,xs:3}," ",a().createElement(s.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),a().createElement(u.Col,{xs:3}," ",a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&Oe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);Ne(we,"propTypes",{bbox:Q().array,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,readFiles:Q().func,onShapeError:Q().func,onShapeSuccess:Q().func,onShapeChoosen:Q().func,addShapeLayer:Q().func,shapeLoading:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,onZoomSelected:Q().func,updateShapeBBox:Q().func,error:Q().string,success:Q().string,mapType:Q().string,buttonSize:Q().string,uploadMessage:Q().object,cancelMessage:Q().object,addMessage:Q().object,stylers:Q().object,uploadOptions:Q().object,createId:Q().func}),Ne(we,"contextTypes",{messages:Q().object}),Ne(we,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var n=(0,C.jU)(e.name),r=e.type||C.Yf[n];return"application/vnd.google-earth.kml+xml"===r?(0,C.BP)(e).then((function(e){return(0,C.bf)(e)})):"application/gpx+xml"===r?(0,C.BP)(e).then((function(e){return(0,C.cX)(e)})):"application/vnd.google-earth.kmz"===r?(0,C.N)(e).then((function(e){return(0,C.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,C.xp)(e).then((function(e){return(0,C.Lz)(e).then((function(n){return n.length>0&&t("shapefile.error.missingPrj"),(0,C.mr)(e)}))})):null}))},mapType:"leaflet",stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null});const Pe=we;var je=n(970674),Ie=n(458272),xe=n(36401),_e=((0,$.connect)((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:ee.bM})(Pe),(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:te.q})(Ie.Z)),Ce=(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:te.q})(je.Z),Le=(0,$.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:te.q})(xe.Z),Re=n(727418),Me=n.n(Re),De=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},ke={r:255,g:0,b:0,a:1},Ge=function(e,t){var n=Me()({},e),r=function(e){return e.features&&e.features[0]?e.features[0].geometry&&e.features[0].geometry.type:void 0}(e);!t.marker||"Point"!==r&&"MultiPoint"!==r||(n.styleName="marker",n.handleClickOnLayer=!0);var o=t||{},i=o.color,a=void 0===i?ke:i,l=o.fill,c=void 0===l?ke:l;return n.style={weight:t.width,radius:t.radius,opacity:a.a,fillOpacity:c.a,color:De(a),fillColor:De(c)},n};function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ye(r.key),r)}}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function We(e,t,n){return(t=Ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ze(t)?t:String(t)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var n=He(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Be(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return We(Be(e=i.call.apply(i,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),We(Be(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),We(Be(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),We(Be(e),"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return a().createElement(u.Row,{key:e&&e.name+e.message},a().createElement(u.Alert,{bsStyle:e.type,style:{textAlign:"center"}},a().createElement(m.Z,{msgId:e.message})))}))})),We(Be(e),"renderSuccess",(function(){return a().createElement(u.Row,null,a().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),We(Be(e),"renderDisableStyleCustomization",(function(e){return e?a().createElement("div",{className:"alert alert-info mb-2 style-customisation-disabled-container"},a().createElement(m.Z,{msgId:"shapefile.styleCustomizationDisabled"})):null})),We(Be(e),"findLayerSerialNumber",(function(t){var n=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===n}))+1})),We(Be(e),"addToMap",(function(){var t=e.props.selected;e.state.useDefaultStyle||(t=Ge(t,e.props.shapeStyle));var n=(0,x.Ag)(t);ce.Promise.resolve(n?e.props.loadAnnotations(t.features,e.state.overrideAnnotation):e.props.addLayer(t)).then((function(){if(!n){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?n?"Annotation":e.props.layers[0].name+(0,ie.S$)(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:n?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),We(Be(e),"annotationOptions",(function(){return a().createElement(a().Fragment,null,a().createElement(u.Col,{xs:2},a().createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.merge"}))),a().createElement(u.Col,{xs:2},a().createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.replace"}))))})),e}return t=l,n=[{key:"componentDidMount",value:function(){var e;this.setState({initialLayers:(e=this.props.layers,function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})}},{key:"render",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!e||!e.features.length)&&e.features.reduce((function(e,t){var n=t.style&&Array.isArray(t.style)&&t.style.length||Object.keys(t.style||{}).length;return e||!!n}),!1)}(this.props.selected);return a().createElement(u.Grid,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,a().createElement(u.Row,null,a().createElement("h4",null,a().createElement("span",{style:{fontWeight:"bold"}},a().createElement(m.Z,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),a().createElement(u.Row,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle||t?null:this.props.stylers[this.getGeomType(this.props.selected)]),this.renderDisableStyleCustomization(t),a().createElement(u.Row,{key:"options"},(0,x.Ag)(this.props.selected)?this.annotationOptions():a().createElement(a().Fragment,null,a().createElement(u.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",disabled:t,checked:t||this.state.useDefaultStyle,defaultChecked:t||this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.defaultStyle"}))),a().createElement(u.Col,{xs:2},a().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),a().createElement(u.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},a().createElement("label",null,a().createElement(m.Z,{msgId:"shapefile.zoom"}))))),a().createElement(u.Row,null,a().createElement(u.ButtonToolbar,{style:{display:"flex",justifyContent:"flex-end"}},a().createElement(s.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),a().createElement(s.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}],n&&Fe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);We(Ve,"propTypes",{bbox:Q().array,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,onError:Q().func,onSuccess:Q().func,setLayers:Q().func,addLayer:Q().func,loadAnnotations:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,onLayerSkipped:Q().func,onZoomSelected:Q().func,updateBBox:Q().func,errors:Q().array,success:Q().string,mapType:Q().string,buttonSize:Q().string,cancelMessage:Q().object,addMessage:Q().object,stylers:Q().object,nextMessage:Q().object,finishMessage:Q().object,skipMessage:Q().object}),We(Ve,"contextTypes",{messages:Q().object}),We(Ve,"defaultProps",{mapType:"leaflet",buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null});const Xe=Ve;var qe=n(61018);function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke.apply(this,arguments)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e,t,n){return(t=nt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e){var t=function(e,t){if("object"!==$e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==$e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$e(t)?t:String(t)}var rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(r);if(o){var n=et(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e={Polygon:a().createElement(_e,null),MultiPolygon:a().createElement(_e,null),GeometryCollection:a().createElement(_e,null),LineString:a().createElement(Le,null),MultiLineString:a().createElement(Le,null),MultiPoint:a().createElement(Ce,null),Point:a().createElement(Ce,null)},t=a().createElement(Xe,Ke({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:a().createElement(J.Z,{msgId:this.props.uploadMessage}),cancelMessage:a().createElement(J.Z,{msgId:"shapefile.cancel"}),nextMessage:a().createElement(J.Z,{msgId:"shapefile.next"}),finishMessage:a().createElement(J.Z,{msgId:"shapefile.finish"}),skipMessage:a().createElement(J.Z,{msgId:"shapefile.skip"})}));return this.props.layers?a().createElement(qe.Z,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:a().createElement(J.Z,{msgId:"shapefile.title"})},t):t}}])&&Qe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(a().Component);tt(rt,"propTypes",{id:Q().string,layers:Q().array,selected:Q().object,style:Q().object,shapeStyle:Q().object,onError:Q().func,setLayers:Q().func,addShapeLayer:Q().func,onSelectLayer:Q().func,onLayerAdded:Q().func,error:Q().string,mapType:Q().string,wrap:Q().bool,wrapWithPanel:Q().bool,panelStyle:Q().object,panelClassName:Q().string,visible:Q().bool,modal:Q().bool,onClose:Q().func,closeGlyph:Q().string,uploadMessage:Q().string,buttonSize:Q().string}),tt(rt,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"});const ot=rt;var it=n(881808),at=n(800827);const lt=(0,r.compose)((0,r.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,n=void 0===t?function(){}:t;return n&&n()})).ignoreElements()})))})),(0,r.branch)((function(e){return!e.enabled}),r.renderNothing),(0,r.branch)((function(e){var t=e.layers;return!t||0===t.length}),(0,r.compose)((0,$.connect)((0,o.zB)({currentMap:at.Od}),{loadMap:it.H0,loadMapInfo:it.I6}),(0,r.renderComponent)(q))))(ot)},481756:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(171703),o=n(805346);const i=(0,r.connect)((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(o.Z)},183807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(12440),o=n(187185),i=n.n(o),a=n(782904),l=n(727418),c=n.n(l);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s={layers:null,errors:null,loading:!1,selected:null,bbox:[190,190,-190,-190]};const p=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case r._p:return c()({},t,{error:n.message,success:null});case r.p5:var o=n.layers&&n.layers[0]?n.layers[0]:null,l=n.layers?n.errors:null;return c()({},t,{layers:n.layers,selected:o,bbox:[190,190,-190,-190],errors:l},o?{}:{success:null});case r.aW:return c()({},t,{errors:i()([].concat((e=t.errors||[],function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[n.error]),(function(e,t){return(e.name&&e.name===t.name||e.filename&&e.filename===t.fileName)&&e.message===t.message})),success:null});case r.br:return c()({},t,{loading:n.status});case r.kn:return c()({},t,{selected:n.layer});case r.aE:var p=t.layers.filter((function(e){return n.layer.name!==e.name}),this),f=p&&p[0]?p[0]:null;return c()({},t,{layers:p,selected:f},f?{}:{bbox:[190,190,-190,-190]});case r.vm:return c()({},t,{bbox:n.bbox});case r.H4:return c()({},t,{success:n.message,errors:null,error:null});case a.kM:return"shapefile"===n.control?c()({},t,{errors:null,success:null}):t;case r._H:var y=t.layers.filter((function(e){return n.layer.name!==e.name}),this),m=y&&y[0]?y[0]:null;return c()({},t,{layers:y,selected:m,success:null});default:return t}}},318323:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(442416),o=n(727418),i=n.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var l={color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1},radius:10,marker:!1};const c=function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,c=arguments.length>1?arguments[1]:void 0;return c.type===r.H?i()({},o,(e={},t=c.name,n=c.value,(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)):o}},673781:(e,t,n)=>{"use strict";n.d(t,{sB:()=>g,_o:()=>v,cM:()=>j,Cq:()=>H,cQ:()=>X,dm:()=>q});var r=n(22222),o=n(675110),i=n(800827),a=n(93152),l=n(307877),c=n(91175),u=n.n(c),s=n(227361),p=n.n(s),f=n(727418),y=n.n(f),m=n(737275);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=(0,r.P1)([o.l2],(function(e){return u()(e.filter((function(e){return"annotations"===e.id})))})),v=function(e){return p()(e,"annotations.config.multiGeometry",!1)},O=function(e){return p()(e,"annotations.removing")},S=function(e){return p()(e,"annotations.format")},E=function(e){return p()(e,"annotations.aeronauticalOptions")},T=function(e){return p()(e,"annotations.showUnsavedChangesModal",!1)},N=function(e){return p()(e,"annotations.showUnsavedStyleModal",!1)},A=function(e){return p()(e,"annotations.showUnsavedGeometryModal",!1)},w=function(e){return p()(e,"annotations.showDeleteFeatureModal",!1)},P=function(e){return!!p()(e,"annotations.closing")},j=function(e){return p()(e,"annotations.editing")},I=function(e){return p()(e,"annotations.editGeometry",!0)},x=function(e){return p()(e,"annotations.featureType")},_=function(e){return p()(e,"annotations.coordinateEditorEnabled")},C=function(e){return!!p()(e,"annotations.drawing")},L=function(e){return p()(e,"annotations.stylerType")},R=function(e){return p()(e,"annotations.drawingText")},M=function(e){return p()(e,"annotations.editedFields",{})},D=function(e){return!!p()(e,"annotations.styling")},k=function(e){return p()(e,"annotations.selected",null)},G=function(e){return p()(e,"annotations.unsavedChanges",!1)},z=function(e){return p()(e,"annotations.unsavedGeometry",!1)},Z=function(e){return p()(e,"annotations.unsavedStyle",!1)},F=function(e){return p()(e,"annotations.validationErrors",{})},U=function(e){return p()(e,"annotations.config",{})},B=function(e){return p()(e,"annotations.symbolList",[])},H=function(e){return p()(e,"annotations.symbolErrors",[])},W=function(e){return(j(e)?"editing":g(e)&&function(e){return p()(e,"annotations.current")}(e)&&"detail")||"list"},Y=function(e){return p()(e,"annotations.showAgain",!1)},V=function(e){return p()(e,"annotations.showPopupWarning",!0)},X=function(e){return y()({},{symbolErrors:H(e),showEdit:(0,a.m6)(e),canEdit:I(e),mouseHoverEvents:(0,l.Qp)(e),closing:P(e),format:S(e)||(0,m.u8)("defaultCoordinateFormat"),aeronauticalOptions:E(e),config:U(e),drawing:C(e),drawingText:R(e),errors:F(e),editing:j(e),coordinateEditorEnabled:_(e),editedFields:M(e),mode:W(e),selected:k(e),featureType:x(e),removing:O(e),mapProjection:(0,i.uy)(e),showUnsavedChangesModal:T(e),showDeleteFeatureModal:w(e),showUnsavedGeometryModal:A(e),showUnsavedStyleModal:N(e),stylerType:L(e),styling:D(e),unsavedChanges:G(e),unsavedGeometry:z(e),unsavedStyle:Z(e),symbolList:B(e),showAgain:Y(e),showPopupWarning:V(e)})},q=(0,r.P1)([X,function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},g,W],(function(e,t,n,r){return y()({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,selected:e.selected,filter:t.filter||"",defaultStyles:t.defaultStyles,loading:t.loading},e.config?{config:e.config}:{})}));(0,r.P1)([q],(function(e){var t=e.current;return{annotation:u()(e.annotations.filter((function(e){return e.properties.id===t})))}}))},105076:(e,t,n)=>{var r=n(989881);e.exports=function(e,t){var n;return r(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}},359704:(e,t,n)=>{var r=n(282908),o=n(267206),i=n(105076),a=n(701469),l=n(816612);e.exports=function(e,t,n){var c=a(e)?r:i;return n&&l(e,t,n)&&(t=void 0),c(e,o(t,3))}}}]);
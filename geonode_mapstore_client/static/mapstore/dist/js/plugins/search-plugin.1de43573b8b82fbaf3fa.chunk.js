(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[65190],{115047:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var n=r(727418),o=r.n(n);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return null===e?[]:e.map((function(e){return{properties:c({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},s=r(59286),f=r(432420),p=["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"];var y=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,i=e.item,a=e.queriableAttributes,c=e.predicate,l=(0,s.generateTemplateString)(n||"")(i),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return a.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(l):l||null},m={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(647310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:u(e.data)}))},wfs:function(e,t){var r=t.url,n=t.typeName,i=t.queriableAttributes,a=void 0===i?[]:i,c=t.outputFormat,l=void 0===c?"application/json":c,u=t.predicate,s=void 0===u?"ILIKE":u,m=t.staticFilter,b=void 0===m?"":m,d=t.blacklist,h=void 0===d?[]:d,v=t.item,g=t.fromTextToFilter,S=void 0===g?y:g,O=t.returnFullData,j=void 0!==O&&O,w=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,p),P=S({searchText:e,staticFilter:b,blacklist:h,item:v,queriableAttributes:a,predicate:s});return f.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:l,cql_filter:P},w)).then((function(e){return j?e:e.features}))}},b={setService:function(e,t){m[e]=t},getService:function(e){return m[e]?m[e]:null}},d={Services:m,Utils:b}},838167:(e,t,r)=>{"use strict";r.d(t,{k9:()=>S,v0:()=>g,ZP:()=>j});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i),c=r(868195);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(y,e);var t,r,n,o,i=(n=y,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(n);if(o){var r=p(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function y(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),i.apply(this,arguments)}return t=y,(r=[{key:"render",value:function(){return this.context.intl?a().createElement(c.FormattedDate,u({value:this.props.value},this.props.dateParams)):a().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),y}(a().Component);y(b,"propTypes",{value:o().object,dateParams:o().object}),y(b,"contextTypes",{intl:o().object}),y(b,"defaultProps",{value:new Date});const d=b;var h=r(615402),v=r(805346),g=v.Z,S=h.Z,O=d;const j={Message:v.Z,HTML:S,DateFormat:O}},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(675263),o=r.n(n),i=r(124852),a=r.n(i);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:u({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(f(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const y=p},212610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n),i=r(867076),a=r(957557),c=r.n(a),l=r(815135);const u=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled;return!(void 0!==r&&r&&t)}),l.Z,(function(e){return function(t){return o().createElement(e,c()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},617252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(124852),o=r.n(n),i=r(867076),a=r(675263),c=r.n(a),l=r(957557),u=r.n(l),s=r(757588),f=r(950966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}const v=(0,i.branch)((function(e){return e.popover}),(function(e){var t;return t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(d,t);var r,n,a,c,l=(a=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(a);if(c){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function d(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),l.apply(this,arguments)}return r=d,(n=[{key:"renderPopover",value:function(){return o().createElement(s.Popover,u()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,u()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(f.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),d}(o().Component),d(t,"propTypes",{popover:c().object}),d(t,"defaultProps",{popover:{trigger:!0}}),t}))},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),i=r(819081),a=r.n(i),c=r(757588),l=r(90085),u=["visible","Element","renderButton"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,f=e.btnDefaultProps,p=void 0===f?{}:f,y=e.transitionProps,m=void 0===y?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:y,b=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,u);return n?a||i&&o().createElement(i,s({key:c.key||t},c))||o().createElement(l.Z,s({key:c.key||t},p,c)):null}))};return o().createElement(c.ButtonGroup,i,m?o().createElement(a(),m,b()):b())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(124852),o=r.n(n),i=r(867076),a=r(805346),c=r(957557),l=r.n(c),u=r(757588),s=r(532425),f=r(212610),p=r(617252),y=r(282467),m=["glyph","loading","text","textId","glyphClassName","loaderProps","children"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}const d=(0,i.compose)(f.Z,p.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,c=e.textId,f=e.glyphClassName,p=void 0===f?"":f,d=e.loaderProps,h=void 0===d?{}:d,v=e.children,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,m);return o().createElement(y.Z,l()(g,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(u.Glyphicon,{glyph:t,className:p}):null,c?o().createElement(a.Z,{msgId:c}):i,r?o().createElement(s.Z,b({className:"ms-loader".concat(g.bsStyle&&" ms-loader-"+g.bsStyle||"").concat(g.bsSize&&" ms-loader-"+g.bsSize||"")},h)):null,v)}))},893555:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>er,searchEpic:()=>Jt});var n=r(49977),o=r(227361),i=r.n(o),a=r(701469),c=r.n(a),l=r(727418),u=r.n(l),s=r(675263),f=r.n(s),p=r(124852),y=r.n(p),m=r(171703),b=r(1852),d=r.n(b),h=r(22222),v=r(460604),g=r(881808),S=r(782904),O=r(801550),j=r(597222),w=r(115047),P="SET_SEARCH_BOOKMARK_CONFIG";function E(e,t){return{type:P,property:e,value:t}}var _=r(757588),C=r(441609),T=r.n(C),k=r(352353),I=r.n(k),x=r(805346),R=r(815135),A=r(423570),N=r.n(A);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}var F=(0,R.Z)(_.DropdownButton),Z={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:N()()},V={title:y().createElement(_.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,o=void 0!==n&&n;return y().createElement(F,D({disabled:o},Z,V),r.length?r.map((function(e){return e})):null)},B=function(e){var t=e.className,r=e.style,n=e.children;return y().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var G=r(86638);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q=function(e,t){var r=e.show,n=e.autoFocusOnSelect,o=void 0===n||n,i=e.selectedItems,a=void 0===i?[]:i,c=e.className,l=e.style,u=void 0===l?{textOverflow:"ellipsis"}:l,s=e.placeholder,f=e.placeholderMsgId,p=e.hideOnBlur,m=void 0===p||p,b=e.searchText,d=void 0===b?"":b,h=e.typeAhead,v=void 0===h||h,g=e.delay,S=void 0===g?1e3:g,O=e.blurResetDelay,j=void 0===O?300:O,w=e.onSearch,P=void 0===w?function(){}:w,E=e.onSearchTextChange,C=void 0===E?function(){}:E,T=e.onCancelSelectedItem,k=void 0===T?function(){}:T,I=e.onPurgeResults,x=void 0===I?function(){}:I,R=y().useRef(),A=y().useRef(),N=z(y().useState(),2),D=N[0],F=N[1],Z=z(y().useState(),2),V=Z[0],M=Z[1],B=z(y().useState(!1),2),L=B[0],q=B[1];y().useEffect((function(){var e=A.current;if(o&&a&&(e<a.length||!e&&1===a.length)){var t=R.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}A.current=a&&a.length})),y().useEffect((function(){L&&(P(),q(!1))}),[L,P]);var U="search.addressSearch";if(!s&&t.messages){var H=(0,G.S$)(t.messages,f||U);H&&(U=H)}else U=s;return r&&y().createElement(_.FormControl,{className:"searchInput".concat(c?" ".concat(c):""),key:"search-input",placeholder:U,type:"text",inputRef:function(e){R.current=e},style:u,value:d,onKeyDown:function(e){switch(e.keyCode){case 13:P();break;case 8:!d&&a&&a.length>0&&k(a[a.length-1])}},onBlur:function(){m&&(D&&clearTimeout(D),F(setTimeout((function(){x()}),j)))},onFocus:function(){v&&d&&P()},onChange:function(e){var t=e.target.value;C(t),v&&(V&&clearTimeout(V),M(setTimeout((function(){q(!0)}),S)))}})};q.contextTypes={messages:f().object};const U=q;var H=r(472986),K=r.n(H),W=r(80717);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X.apply(this,arguments)}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==$(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===$(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ee=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,o=e.toolbarButtons,i=void 0===o?[]:o,a=e.children;return y().createElement("span",{className:"search-toolbar-options"},t&&y().createElement(K(),{style:u()({},{position:"absolute"},Y({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),y().createElement(W.Z,X({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),a)};var te=r(743129);function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==re(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===re(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ue=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(te.ZP),se={searchByBookmark:function(e,t,r,n,o){var i,a,c=e.options,l=void 0===c?{}:c,u=e.layerVisibilityReload;void 0!==u&&u?t(ce(ce({},r),{},{map:ce(ce({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[l.west,l.south,l.east,l.north],crs:(null==r||null===(i=r.map)||void 0===i||null===(a=i.center)||void 0===a?void 0:a.crs)||"EPSG:4326"}):l&&!T()(l)&&o([l.west,l.south,l.east,l.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,i=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&se.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},i)}}}},fe=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,n=e.onLayerVisibilityLoad,o=e.mapInitial,i=e.onZoomToExtent,a=oe((0,p.useState)([]),2),c=a[0],l=a[1],u=t||{},s=u.selected,f=void 0===s?{}:s,m=u.bookmarkSearchConfig,b=void 0===m?{}:m,d=u.zoomOnSelect,h=void 0===d||d,v=b.bookmarks,g=void 0===v?[]:v,S=se.searchByBookmark;return(0,p.useEffect)((function(){T()(g)||l(g.map((function(e){return e.title})))}),[g]),y().createElement("div",{className:"search-select"},y().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},y().createElement(ue,ne({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",a=oe(g.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",a),h&&S(a,n,o,b,i)},value:(null==f?void 0:f.title)||"",options:c.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};fe.propTypes={bookmarkConfig:f().object.isRequired,onPropertyChange:f().func.isRequired};const pe=(0,m.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:E,onZoomToExtent:O.Px,onLayerVisibilityLoad:g.H0})(fe);var ye=r(281763),me=r.n(ye),be=r(799509),de=r(777900),he={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return me()(null==e?void 0:e.lon)&&me()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:y().createElement(_.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:y().createElement(x.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:y().createElement(x.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:de.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&(me()(t.lon)||me()(t.lat)),onClick:function(){return he.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&he.areValidCoordinates(t)&&he.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,o=e.onChangeActiveSearchTool,i=e.onClearBookmarkSearch;return y().createElement(_.MenuItem,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),i("selected"),o("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},y().createElement(_.Glyphicon,{glyph:"search-coords"})," ",y().createElement(x.Z,{msgId:"search.coordinatesSearch"}))}},ve=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,o=e.onClearCoordinatesSearch,i=e.onZoomToPoint,a=e.onChangeCoord,c=e.defaultZoomLevel,l=e.aeronauticalOptions,u=void 0===l?{seconds:{decimals:4,step:1e-4}}:l,s=e.constraintsCoordEditor,f=void 0===s?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:s,p=he.zoomToPoint,m=he.areValidCoordinates,b=function(e,t){a(e,parseFloat(t)),m()||o({owner:"search"})},d=function(){p(i,r,c)};return y().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},y().createElement(_.Row,{className:"entryRow ".concat(n)},y().createElement(_.FormGroup,null,y().createElement(_.InputGroup,null,y().createElement(_.InputGroup.Addon,{style:{minWidth:45}},y().createElement(x.Z,{msgId:"search.latitude"})),y().createElement(be.Z,{format:n,aeronauticalOptions:u,coordinate:"lat",idx:1,value:r.lat,constraints:f,onChange:function(e){return b("lat",e)},onKeyDown:function(){m(r)&&d()}})))),y().createElement(_.Row,{className:"entryRow ".concat(n)},y().createElement(_.FormGroup,null,y().createElement(_.InputGroup,null,y().createElement(_.InputGroup.Addon,{style:{minWidth:45}},y().createElement(x.Z,{msgId:"search.longitude"})),y().createElement(be.Z,{format:n,aeronauticalOptions:u,coordinate:"lon",idx:2,value:r.lon,constraints:f,onChange:function(e){return b("lon",e)},onKeyDown:function(){m(r)&&d()}})))))};ve.propTypes={coordinate:f().object,format:f().string,onClearCoordinatesSearch:f().func,onZoomToPoint:f().func,onChangeCoord:f().func,defaultZoomLevel:f().number};const ge=(0,m.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:j.Z,onChangeCoord:j.TS})(ve);function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}var Oe=["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"];function je(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?we(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){_e(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Se(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=r(313311),Te=r.n(Ce),ke=r(59286);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fe(n.key),n)}}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Re(e,t)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function De(e,t,r){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ie(t)?t:String(t)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}(c,e);var t,r,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(n);if(o){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ae(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return De(Ae(e=a.call.apply(a,[this].concat(r))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=c,(r=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return y().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},y().createElement("div",{className:"search-result-left-container"},y().createElement("div",{className:"icon"}," ",y().createElement("img",{src:e.icon})),y().createElement("div",{className:"text-result-title"},i()(e,this.props.displayName)||(0,ke.generateTemplateString)(this.props.displayName||"")(e)),y().createElement("small",{className:"text-info"},this.props.subTitle&&i()(e,this.props.subTitle)||(0,ke.generateTemplateString)(this.props.subTitle||"")(e))),y().createElement("div",{className:"search-result-right-container"},y().createElement("div",{className:"search-result-tools"},y().createElement(W.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&xe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(y().Component);De(Ze,"propTypes",{subTitle:f().string,item:f().object,displayName:f().string,idField:f().string,icon:f().string,onItemClick:f().func,tools:f().array}),De(Ze,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const Ve=Ze;var Me=r(838167),Be=r(218412);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ke(n.key),n)}}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ue(e)}function He(e,t,r){return(t=Ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e){var t=function(e,t){if("object"!==Ge(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ge(t)?t:String(t)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ue(n);if(o){var r=Ue(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return qe(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return He(qe(e=i.call.apply(i,[this].concat(r))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),He(qe(e),"renderResults",(function(){return e.props.results.map((function(t,r){var n,o=e.findService(t)||{},i=Te()(e.props.layers,{name:null===(n=o.options)||void 0===n?void 0:n.typeName}),a=(0,Be.zA)(o),c=!(0,Be.Tv)(i,o);return y().createElement(Ve,{subTitle:o.subTitle,idField:o.idField,displayName:o.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",keyProp:"open-gfi",visible:a,disabled:c,glyph:"info-sign",tooltipId:a&&c?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),He(qe(e),"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===Ge(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=y().createElement(Me.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,o=r.height-this.props.sizeAdjustment.height;t=u()({},this.props.containerStyle,{maxWidth:n,maxHeight:o})}return this.props.results?0===this.props.results.length?y().createElement("div",{className:"search-result-list",style:u()({padding:"10px",textAlign:"center"},t)},e):y().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&ze(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(y().Component);He(We,"propTypes",{results:f().array,layers:f().array,searchOptions:f().object,mapConfig:f().object,fitToMapSize:f().bool,containerStyle:f().object,sizeAdjustment:f().object,onItemClick:f().func,addMarker:f().func,afterItemClick:f().func,showGFI:f().func,notFoundMessage:f().oneOfType([f().object,f().string])}),He(We,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}});var $e=r(294707),Xe=r.n($e),Qe=r(235385),Ye=r.n(Qe),Je=(r(189734),r(414293)),et=r.n(Je),tt=r(675110),rt=r(921914),nt=r(580416),ot=r(986267),it=r(432420),at=r(107412),ct=r(307877);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ut(e){return function(e){if(Array.isArray(e))return st(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==lt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===lt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mt=function(e,t){return(0,at.mx)(e,pt({},(0,ct.oq)(t)))},bt=r(426125);function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==dt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===dt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ot(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jt=r(800827),wt=r(737275),Pt=r(282467);function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,It(n.key),n)}}function Ct(e,t){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ct(e,t)}function Tt(e){return Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tt(e)}function kt(e,t,r){return(t=It(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function It(e){var t=function(e,t){if("object"!==Et(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Et(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Et(t)?t:String(t)}var xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tt(n);if(o){var r=Tt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return y().createElement(Pt.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button"},y().createElement(_.Glyphicon,{glyph:"search"}))}}])&&_t(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(y().Component);kt(xt,"propTypes",{pressed:f().bool,onToggle:f().func}),kt(xt,"defaultProps",{pressed:!1,onToggle:function(){}});const Rt=(0,m.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:S.Xi.bind(null,"search",null)})(xt);var At;function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Dt(e){return function(e){if(Array.isArray(e))return Ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(r),!0).forEach((function(t){qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mt.apply(this,arguments)}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ut(n.key),n)}}function Gt(e,t){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Gt(e,t)}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function qt(e,t,r){return(t=Ut(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e){var t=function(e,t){if("object"!==Nt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Nt(t)?t:String(t)}var Ht=r(409669).create(),Kt="6605d49756a8e87937d07a0366bd7b13",Wt=(0,h.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:i()(e,"activeSearchTool","addressSearch"),format:i()(e,"format")||wt.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),$t=(0,m.connect)(Wt,{onSearch:j.tt,onChangeCoord:j.TS,onChangeActiveSearchTool:j.a,onClearCoordinatesSearch:v.fU,onClearBookmarkSearch:E,onChangeFormat:j.Zw,onToggleControl:S.Xi,onZoomToPoint:j.Z,onPurgeResults:j.kV,onSearchReset:j.v2,onSearchTextChange:j.k9,onCancelSelectedItem:j.KG,onZoomToExtent:O.Px,onLayerVisibilityLoad:g.H0})((function(e){var t,r=e.activeSearchTool,n=void 0===r?"addressSearch":r,o=e.removeIcon,i=void 0===o?"1-close":o,a=e.searchIcon,c=void 0===a?"search":a,l=e.isSearchClickable,u=void 0===l||l,s=e.splitTools,f=e.searchText,p=void 0===f?"":f,m=e.maxResults,b=void 0===m?15:m,d=e.searchOptions,h=e.loading,v=e.delay,g=e.blurResetDelay,S=e.typeAhead,O=e.coordinate,j=void 0===O?{}:O,w=e.selectedItems,P=void 0===w?[]:w,E=e.defaultZoomLevel,C=void 0===E?12:E,k=e.enabledSearchBookmarkConfig,R=void 0!==k&&k,A=e.error,N=e.format,D=void 0===N?"decimal":N,F=e.placeholder,Z=e.placeholderMsgId,V=void 0===Z?"search.addressSearch":Z,G=e.showOptions,z=void 0===G||G,L=e.showAddressSearchOption,q=void 0===L||L,H=e.showCoordinatesSearchOption,K=void 0===H||H,W=e.showBookMarkSearchOption,$=void 0===W||W,X=e.onSearch,Q=e.onSearchReset,Y=e.onSearchTextChange,J=e.onCancelSelectedItem,te=e.onChangeCoord,re=void 0===te?function(){}:te,ne=e.onChangeActiveSearchTool,oe=void 0===ne?function(){}:ne,ie=e.onClearCoordinatesSearch,ae=void 0===ie?function(){}:ie,ce=e.onChangeFormat,le=void 0===ce?function(){}:ce,ue=e.onToggleControl,fe=void 0===ue?function(){}:ue,ye=e.onZoomToPoint,me=void 0===ye?function(){}:ye,be=e.onClearBookmarkSearch,de=void 0===be?function(){}:be,ve=e.onPurgeResults,Se=e.items,we=void 0===Se?[]:Se,Pe=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Oe),_e=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,i=e.onSearch,a=void 0===i?function(){}:i,c=e.onSearchReset,l=void 0===c?function(){}:c;return function(){var e=t,i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&a(e,n,i):l()}}({searchText:p,selectedItems:P,searchOptions:d,maxResults:b,onSearch:X,onSearchReset:Q}),Ce=function(){Q()},Te=[];if(q&&Te.push(y().createElement(_.MenuItem,{active:"addressSearch"===n,onClick:function(){ae({owner:"search"}),de("selected"),oe("addressSearch")}},y().createElement(_.Glyphicon,{glyph:c})," ",y().createElement(x.Z,{msgId:"search.addressSearch"}))),K&&Te.push(y().createElement(he.coordinatesMenuItem,{activeTool:n,searchText:p,clearSearch:Ce,onChangeActiveSearchTool:oe,onClearBookmarkSearch:de})),$&&!T()(we)){var ke,Ie=Pe.bookmarkConfig||{},xe=Ie.allowUser,Re=Ie.bookmarkSearchConfig,Ae=we.find((function(e){return"SearchByBookmark"===e.name}))||{};if(Ae.menuItem){var Ne=Ae.menuItem;Te.push(y().createElement(Ne,null))}Ae.bookmarkConfig&&(t=Ee(Ee({},Ae.bookmarkConfig(fe,R,n)),!xe&&{visible:!1})),xe||0!==(null==Re||null===(ke=Re.bookmarks)||void 0===ke?void 0:ke.length)||"bookmarkSearch"!==n||oe("addressSearch")}var De,Fe=function(){if(z){if("coordinatesSearch"===n)return he.coordinateFormatChange(D,le,z,n);if("bookmarkSearch"===n)return t}return null};return y().createElement(B,null,y().createElement(_.FormGroup,null,y().createElement("div",{className:"input-group",style:{display:"flex"}},P&&P.map((function(e,t){return y().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},y().createElement("div",{className:"selectedItem-text"},e.text))})),y().createElement(U,{show:"addressSearch"===n,delay:v,typeAhead:S,blurResetDelay:g,placeholder:F,placeholderMsgId:V,searchText:p,selectedItems:P,onSearch:_e,onSearchTextChange:Y,onCancelSelectedItem:J,onPurgeResults:ve}),"coordinatesSearch"===n&&K&&y().createElement(ge,{format:D,defaultZoomLevel:C,onClearCoordinatesSearch:ae}),"bookmarkSearch"===n&&$&&y().createElement(pe,{mapInitial:Pe.mapInitial}),y().createElement(ee,{splitTools:!1,toolbarButtons:[].concat(je(Fe()?[Ee({},Fe())]:[]),je(we.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!z,Element:t}}))),[Ee({glyph:i,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!I()(h)&&h,visible:"addressSearch"===n&&(""!==p||P&&P.length>0),onClick:function(){"addressSearch"===n&&Ce()}},"coordinatesSearch"===n&&he.removeIcon(n,j,ae,re)),Ee(Ee({glyph:c,className:"square-button-md no-border "+(u||"addressSearch"!==n?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==n||(""!==p||P&&P.length>0)&&s),onClick:function(){return u&&_e()}},"coordinatesSearch"===n&&he.searchIcon(n,j,me,C)),"bookmarkSearch"===n&&se.searchIcon(n,Pe)),{tooltip:(De=A,De?y().createElement(x.Z,{msgId:De.msgId||"search.generic_error",msgParams:{message:De.message,serviceType:De.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!A,onClick:Ce},{visible:z,renderButton:y().createElement(M,{disabled:z,menuItems:Te})}])}))))})),Xt=(0,h.P1)([jt.Od,tt.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),Qt=(0,m.connect)(Xt,{onItemClick:j.Jc,addMarker:j._q,showGFI:j.w4})(We),Yt=(0,m.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:j.o$})((At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lt(n);if(o){var r=Lt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zt(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qt(zt(e=a.call.apply(a,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&i()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),qt(zt(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?u()({},r,{services:n.services}):u()({},r,{services:r.services.concat(n.services)}):r})),qt(zt(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?u()({},r,{services:t}):r})),qt(zt(e),"getSearchAndToggleButton",(function(){var t=y().createElement($t,Mt({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[y().createElement(Rt,null)].concat(e.props.enabled?[t]:null):c()(e.props.withToggle)?y().createElement("span",null,y().createElement(d(),{query:"("+e.props.withToggle[0]+")"},y().createElement(Rt,null),e.props.enabled?t:null),y().createElement(d(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(Vt(Vt({},Be.be),this.props.resultsStyle))}},{key:"render",value:function(){return y().createElement("span",null,this.getSearchAndToggleButton(),y().createElement(Qt,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&Bt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(y().Component),qt(At,"propTypes",{splitTools:f().bool,showOptions:f().bool,isSearchClickable:f().bool,fitResultsToMapSize:f().bool,searchOptions:f().object,resultsStyle:f().object,selectedItems:f().array,selectedServices:f().array,userServices:f().array,withToggle:f().oneOfType([f().bool,f().array]),enabled:f().bool,textSearchConfig:f().object}),qt(At,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),At)),Jt=function(e){return e.ofType(j.bj).debounceTime(250).switchMap((function(t){return n.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=w.b.Utils.getService(e.type);if(!r){var o=new Error("Service Missing");return o.msgId="search.service_missing",o.serviceType=e.type,n.Observable.of(o).do((function(e){throw e}))}return n.Observable.defer((function(){return"nominatim"===e.type?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ht.get("https://search.longdo.com/mapsearch/json/search?keyword=".concat(e,"&key=").concat(Kt))}(t.searchText).then((function(e){var t=e.data.data,r=[];return t.map((function(e){r.push({properties:{place_id:e.id,display_name:e.name},id:N()(),type:"Feature",bbox:[e.lon-.1,e.lat-.1,e.lon+.1,e.lat+.1],geometry:{type:"Point",coordinates:[e.lon,e.lat]}})})),r})):r(t.searchText,e.options).then((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return Vt(Vt({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return sortBy([].concat(Dt(e),Dt(t)),["__PRIORITY__"])})).map((function(e){return(0,j.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,j.yo)(!0)).takeUntil(e.ofType(j.Av,j.M8,j.dX)).concat([(0,j.yo)(!1)]).catch((function(e){var t=Vt(Vt({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return n.Observable.from([(0,j.kE)(t),(0,j.yo)(!1)])}))}))};const er={SearchPlugin:u()(Yt,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:Jt,searchOnStartEpic:function(e,t){return e.ofType(j.Vc).switchMap((function(e){var r=e.layer,o=e.cql_filter,i=t.getState();if(0===(0,tt.OX)(i).filter((function(e){return e.name===r})).length)return n.Observable.of((0,j.Tw)());var a=(0,tt.dT)(i,r);return a&&o?n.Observable.defer((function(){return(0,it.DH)(a.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:o}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&pt(pt({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var t=e.type,r=e.geometry,i=e.typeName,a=Ye()({type:t,geometry:r}).geometry.coordinates,c={lng:a[0],lat:a[1]};return a?n.Observable.of((0,rt.lK)({latlng:c},i,[i],yt({},i,{cql_filter:o})),(0,rt.HP)()):n.Observable.empty()})).catch((function(){return n.Observable.of((0,j.I3)())})):n.Observable.empty()}))},searchItemSelected:function(e,t){return e.ofType(j.dX).switchMap((function(e){var r=n.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,ke.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return n.Observable.fromPromise(w.b.Utils.getService(t.__SERVICE__.geomService.type)("",u()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return u()({},t,{geometry:ot.default.mergeToPolyGeom(e)})})))}return n.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||Xe()(e),n=[(0,O.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,j._q)(e)];if(e.__SERVICE__&&!et()(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=Ye()(e).geometry.coordinates,i={lng:o[0],lat:o[1]},a=e.__SERVICE__.options.typeName;if(o){var c=t.getState(),l=a&&(0,tt.dT)(c,a),u=null,s=[],f={},p=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(p=e.__SERVICE__.forceSearchLayerVisibility,s=[a],u=e.id,f=yt({},e.__SERVICE__.options.typeName,pt({info_format:mt(l,c)},u?{featureid:u,CQL_FILTER:void 0}:{}))),[].concat(ut(p&&l?[(0,nt.He)(l.id,{visibility:!0})]:[]),ut(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,rt.lK)({latlng:i},a,s,f,u)]),[(0,rt.HP)()],n)}}return n})),o=e.item,i=o&&o.__SERVICE__&&o.__SERVICE__.then,a=i?n.Observable.of((0,j.QJ)(i.map((function(e){return pt(pt({},e),{},{options:pt({item:o},e.options)})})),{text:(0,ke.generateTemplateString)(o.__SERVICE__.displayName||"")(o),placeholder:o.__SERVICE__.nestedPlaceholder&&(0,ke.generateTemplateString)(o.__SERVICE__.nestedPlaceholder||"")(o),placeholderMsgId:o.__SERVICE__.nestedPlaceholderMsgId&&(0,ke.generateTemplateString)(o.__SERVICE__.nestedPlaceholderMsgId||"")(o)},(0,ke.generateTemplateString)(o.__SERVICE__.searchTextTemplate||"")(o))):n.Observable.empty(),c=o.__SERVICE__&&o.__SERVICE__.searchTextTemplate,l=c?n.Observable.of((0,j.k9)((0,ke.generateTemplateString)(c)(o))):n.Observable.empty();return n.Observable.of((0,j.kV)()).concat(r,a,l)}))},zoomAndAddPointEpic:function(e,t){return e.ofType(j.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},o=t.getState();return n.Observable.from([(0,v.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:o.search&&o.search.style||Be.be}),(0,O.xy)(e.pos,e.zoom,e.crs)])}))},textSearchShowGFIEpic:function(e,t){return e.ofType(j.al).filter((function(e){var t,r=e.item,n=void 0===r?{}:r;return!(null!=n&&null!==(t=n.__SERVICE__)&&void 0!==t&&t.customGFI)})).switchMap((function(r){var o,i,a,c,l,u,s=r.item,f=t.getState(),p=null==s||null===(o=s.__SERVICE__)||void 0===o||null===(i=o.options)||void 0===i?void 0:i.typeName,y=p&&(0,tt.dT)(f,p),m=s.bbox||s.properties.bbox||Xe()(s),b=Ye()(s).geometry.coordinates,d={lng:b[0],lat:b[1]},h=s.id;return b&&(0,Be.zA)(null==s?void 0:s.__SERVICE__)&&(0,Be.Tv)(y,null==s?void 0:s.__SERVICE__)?(a=n.Observable).of.apply(a,ut(null!=s&&null!==(c=s.__SERVICE__)&&void 0!==c&&c.forceSearchLayerVisibility&&y?[(0,nt.He)(y.id,{visibility:!0})]:[]).concat([(0,rt.lK)({latlng:d},p,[p],yt({},p,pt({info_format:mt(y,f)},h?{featureid:h,CQL_FILTER:void 0}:{})),h),(0,rt.HP)(),(0,j._q)(s)])).merge(m?e.ofType(rt.XL).take(1).mapTo((0,O.Px)([m[0],m[1],m[2],m[3]],"EPSG:4326",(null==s||null===(l=s.__SERVICE__)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.maxZoomLevel)||21)).takeUntil(e.ofType(rt.Ih,rt.km)):n.Observable.empty()).let((function(e){return m&&(0,tt._$)(t.getState())?e.startWith((0,rt.PM)(!1)).concat(n.Observable.of((0,rt.PM)(!0))):e})):n.Observable.empty()}))}},reducers:{search:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case j.NN:return u()({},t,{loading:r.loading});case j.O7:return u()({},t,{error:r.error});case j.gs:return u()({},t,{searchText:r.searchText,error:null});case j.p7:var n=r.results;return!0===r.append&&t&&t.results&&(n=[].concat(St(t.results),St(r.results))),u()({},t,{results:n,error:null});case j.Av:return u()({},t,{results:null,error:null});case j.wn:var o=r.markerPosition.latlng?{latlng:r.markerPosition.latlng,lat:r.markerPosition.latlng.lat,lng:r.markerPosition.latlng.lng}:r.markerPosition;return u()({},t,{markerPosition:o,markerLabel:r.markerLabel});case j.Gh:return u()({},t,{highlightedFeature:r.highlightedFeature});case j.M8:return{style:t.style||{}};case S.l:return null;case j.C2:return u()({},t,{selectedServices:r.services,searchText:r.searchText,selectedItems:(t.selectedItems||[]).concat(r.items)});case j.oQ:return t?u()({},{selectedItems:t.selectedItems&&t.selectedItems.filter((function(e){return e!==r.item})),searchText:""===t.searchText&&r.item&&r.item.text?r.item.text.substring(0,r.item.text.length):t.searchText}):t;case j.x2:return u()({},t,{style:r.style});case j.Y7:return vt(vt({},t),{},{activeSearchTool:r.activeSearchTool});case j.GI:return vt(vt({},t),{},{format:r.format});case j.KP:return vt(vt({},t),{},{coordinate:vt(vt({},t.coordinate),{},gt({},r.coord,r.val))});case j.dS:return u()({},t,{markerPosition:null!=t&&null!==(e=t.markerPosition)&&void 0!==e&&e.latlng?{}:null==t?void 0:t.markerPosition});default:return t}},mapInfo:bt.Z}}}}]);
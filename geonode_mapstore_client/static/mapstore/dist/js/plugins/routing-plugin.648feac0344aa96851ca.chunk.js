(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[73986],{604206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>n,pb:()=>o,kD:()=>a,DI:()=>i,IC:()=>l,iU:()=>u,W7:()=>c,uB:()=>s,Rh:()=>f,G_:()=>p,vU:()=>y,Vw:()=>d,KD:()=>m,uj:()=>b,lo:()=>g,Yf:()=>h,fo:()=>v,PY:()=>E,bp:()=>O,oJ:()=>w,k4:()=>S,sc:()=>P,Li:()=>x});var n="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",a="DRAW:SET_CURRENT_STYLE",i="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",u="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",f="DRAW:SNAPPING_IS_LOADING",p="DRAW:TOGGLE_SNAPPING",y="DRAW:SET_SNAPPING_CONFIG";function d(e,t,r,n,o){return{type:i,features:e,owner:t,enableEdit:r,textChanged:n,circleChanged:o}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:u,features:e}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:c,features:e}}function g(){return{type:l}}function h(e,t,r,o,a,i){return{type:n,status:e,method:t,owner:r,features:o,options:a,style:i}}function v(e,t){return{type:o,geometry:e,owner:t}}function E(e){return{type:a,currentStyle:e}}var O=function(e){return h("clean","",e,[],{})};function w(){return{type:p}}function S(e){return{type:s,snappingLayer:e}}function P(){return{type:f}}function x(e,t,r){return{type:y,value:e,prop:t,pluginCfg:r}}},965539:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(e){var t=e.id,r=e.children,n=e.header,a=e.footer,l=e.columns,u=e.height,c=e.style,s=void 0===c?{}:c,f=e.className,p=e.bodyClassName,y=void 0===p?"ms2-border-layout-body":p;return o().createElement("div",{id:t,className:f,style:i({display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"hidden"},s)},n,o().createElement("div",{className:y,style:{display:"flex",flex:1,overflowY:"auto"}},o().createElement("main",{className:"ms2-border-layout-content",style:{flex:1,overflowX:"hidden"}},u?o().createElement("div",{style:{height:u}},r):r),u?o().createElement("div",{style:{height:u}},l):l),a)}},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(727418),o=r.n(n),a=r(675263),i=r.n(a),l=r(124852),u=r.n(l),c=r(485294),s=r.n(c),f=r(472986),p=r.n(f),y=r(805346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function E(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(l,e);var t,r,n,a,i=(n=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(a){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function l(){var e;g(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(O(e=i.call.apply(i,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?u().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},u().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},u().createElement(y.Z,{msgId:"loading"}),u().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),S(O(e),"renderRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),S(O(e),"hasRole",(function(t){return u().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),S(O(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=u().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},u().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),u().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?u().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):u().createElement("span",null)),r=this.props.draggable?u().createElement(s(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?u().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(u().Component);S(P,"propTypes",{id:i().string.isRequired,style:i().object,backgroundStyle:i().object,className:i().string,maskLoading:i().bool,containerClassName:i().string,headerClassName:i().string,bodyClassName:i().string,footerClassName:i().string,onClickOut:i().func,modal:i().bool,start:i().object,draggable:i().bool,bounds:i().oneOfType([i().string,i().object])}),S(P,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const x=P},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(675263),o=r.n(n),a=r(124852),i=r.n(a);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e){return e>100?"full":e>40?"medium":"small"},f=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,a=e.hidden;return i().createElement("div",{className:o,style:u({width:t,height:t,overflow:"hidden"},n)},!a&&i().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};f.propTypes={size:o().number,className:o().string,style:o().object};const p=f},993451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(86638),o=r(675263),a=r.n(o),i=r(984596),l=r.n(i),u=r(701469),c=r.n(u),s=r(414293),f=r.n(s),p=r(747037),y=r.n(p),d=r(867076),m=["messages"];function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var a=(0,n.S$)(e,o[r]||y()(o)&&o||"");return h(h({},o),{},v({},r,f()(a)?t:a))}));var o=(0,n.S$)(e,t);return f()(o)?t:o},O=function(e,t,r){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return h(h({},n),{},v({},o,e[o]&&E(t,e[o],r)))}};const w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,d.compose)((0,d.getContext)({messages:a().object}),(0,d.mapProps)((function(r){var n=r.messages,o=b(r,m);return h(h({},o),l()(e).reduce(O(o,n,t),{}))})))}},915776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>me});var n=r(675263),o=r.n(n),a=r(124852),i=r.n(a),l=r(171703),u=r(607147),c=r(22222),s=r(727418),f=r.n(s),p=r(227361),y=r.n(p),d=r(782904),m="BUFFER:SET_LAYER",b="BUFFER:SET_RADIUS",g="BUFFER:SET_UNIT",h="BUFFER:DO_BUFFER",v="BUFFER:ADD_AS_LAYER",E="BUFFER:SET_LOADING",O="BUFFER:FETCH_FAILURE",w="TOGGLE_CONTROL",S=function(e){return{type:m,index:e}},P=function(e){return{type:b,radius:e}},x=function(e){return{type:v,bufferedFtCollection:e}},C=function(e){return{type:E,isLoading:e}},R=function(e){return{type:O,error:e}},j=r(49977),A=r.n(j),T=r(423570),I=r.n(T),N=r(580416),L=r(805346),_=r(47805),k=r(333567),D=r(375875),G=r.n(D),F=r(929346);function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M="",B=function(e){return e?function(t,r){var n=function(e){var n=function(e,r){var n=e,o=r;if(resizeBy<=0)return t(R(i().createElement(L.Z,{msgId:"bufferPlugin.errorLessThan1"}))),void t(C(!1));switch(o){case"meters":n/=1e3,o="kilometers";break;case"วา":n/=500,o="kilometers";break;default:removeEventListener}return[n,o]}(r().buffer.radius,r().buffer.unitValue);if(void 0!==n){var o=[];e.features.forEach((function(e){e.id?o.push(e.id):e.properties.id&&o.push(e.properties.id)}));var a=(0,k.Z)(e,n[0],{units:n[1]});return a.features.forEach((function(e,t){e.id="buffered_"+o[t],e.properties.id&&(e.properties.id="buffered_"+o[t])})),a}};if(t(C(!0)),M=e.title||e.name,e.features){var o;o="Annotations"===M?function(e){for(var t=[],r=0;r<e.features.length;r++)for(var n=0;n<e.features[r].features.length;n++)t.push(e.features[r].features[n]);return t}(e):e.features;var a=(0,F.uf)(o),l=n(a);if(void 0===l)return;t(x(l)),t(R("succeed")),t(S(-1)),t(C(!1)),t(P(1))}else new Promise((function(t){var r={service:"WFS",version:e.version,request:"GetFeature",typeName:e.name,outputFormat:"application/json"};if(e.layerFilter){var n=(0,_.toCQLFilter)(null==e?void 0:e.layerFilter);r.cql_filter=n}t(G().get("".concat(e.url||"/geoserver/wfs"),{params:r}))})).then((function(e){var r=e.data,o=n(r);void 0!==o&&(t(x(o)),t(R("succeed")),t(S(-1)),t(C(!1)),t(P(1)))})).catch((function(e){console.error(e),t(C(!1)),t(R(i().createElement(L.Z,{msgId:"bufferPlugin.errorFetch"})))}))}:function(e){e(R(i().createElement(L.Z,{msgId:"bufferPlugin.noLayer"})))}},Z={radius:1,layerIndex:-1,unitValue:"kilometers",loading:!1,error:""},Y=r(807472),W=r(200020),H=r(757588),z=r(675110),V=r(743129),q=r(441609),$=r.n(q);function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(this,arguments)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Q=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(V.ZP),ee=function(e){var t=e.responses,r=e.index,n=e.setIndex,o=X((0,a.useState)([]),2),l=o[0],u=o[1],c=X((0,a.useState)(""),2),s=c[0],f=c[1];return(0,a.useEffect)((function(){$()(t)||u(t.map((function(e,t){var r=(null==e?void 0:e.title)||(null==e?void 0:e.name);return{label:r,value:r,idx:t,style:{display:"block"}}})))}),[t]),(0,a.useEffect)((function(){var e,n;f((null===(e=t[r])||void 0===e?void 0:e.title)||(null===(n=t[r])||void 0===n?void 0:n.name)||"")}),[t,r]),i().createElement("div",{id:"identify-layer-select",style:{flex:"1 1 0%"}},i().createElement(Q,K({},{clearable:!1,isSearchable:!0},{onChange:function(e){var t=(null==e?void 0:e.idx)||0;n(t)},value:s||"",options:l,noResultsText:"identifyLayerSelectNoResult"})))};ee.defaultProps={responses:[],index:-1},ee.propTypes={responses:o().array,setIndex:o().func,index:o().number};const te=ee;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function ue(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(0,u.Yq)("buffer");var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(n);if(o){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function l(){var e;ae(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fe(ce(e=a.call.apply(a,[this].concat(r))),"dialogStyle",{position:"fixed",top:"0px",left:"0px",width:"500px"}),fe(ce(e),"start",{x:.5*(window.innerWidth-600),y:.5*(window.innerHeight-100)}),fe(ce(e),"onClose",(function(){e.props.onClose(!1)})),fe(ce(e),"onLayerChange",(function(t){e.props.onChangeLayer(t)})),fe(ce(e),"onDoBuffer",(function(){e.props.onDoBuffer(e.props.layersNode[e.props.layerIndex])})),fe(ce(e),"onChangeUnit",(function(t){e.props.onChangeUnit(t)})),fe(ce(e),"onChangeRadius",(function(t){var r=t<0?0:t;e.props.onChangeRadius(Number(r))})),fe(ce(e),"onReset",(function(){e.props.onChangeLayer(-1)})),e}return t=l,(r=[{key:"render",value:function(){var e=this;return this.props.show?i().createElement(Y.Z,{Dialog:!0,id:"buffer-dialog",style:null==this?void 0:this.dialogStyle,start:null==this?void 0:this.start},i().createElement("div",{key:"header",role:"header"},i().createElement(H.Glyphicon,{glyph:"folder-open"})," ",i().createElement(L.Z,{msgId:"bufferPlugin.title"}),i().createElement("button",{key:"close",onClick:this.onClose,className:"close"},i().createElement(H.Glyphicon,{glyph:"1-close"}))),i().createElement("div",{key:"body",role:"body"},i().createElement("p",null,i().createElement(L.Z,{msgId:"bufferPlugin.layerLabel"})),i().createElement(te,{responses:this.props.layersNode,index:this.props.layerIndex,setIndex:this.onLayerChange}),i().createElement("br",null),i().createElement("p",null,i().createElement(L.Z,{msgId:"bufferPlugin.bufferLabel"})),i().createElement(H.Row,null,i().createElement(H.Col,{md:6,sm:6},i().createElement("input",{style:{height:"34px"},required:!0,type:"text",onKeyPress:"return (event.charCode !=8 && event.charCode ==0 || ( event.charCode == 46 || (event.charCode >= 48 && event.charCode <= 57)))",className:"form-control",id:"buffer-size",onChange:function(t){return e.onChangeRadius(t.nativeEvent.target.value)},value:this.props.radius>=0?this.props.radius:""})),i().createElement(H.Col,{md:6,sm:6},i().createElement(W.DropdownList,{id:"bufferUnitValues",data:this.props.bufferUnitValues,dataKey:"value",textField:"label",valueField:"value",defaultValue:this.props.bufferUnitValues[0],onChange:function(t){return e.onChangeUnit(t.value)}}))),i().createElement("br",null),i().createElement("div",{style:{display:"flex"}},i().createElement("br",null),this.props.loading?i().createElement("button",{key:"buffer-loading",className:"btn btn-longdo-outline-info",style:{minWidth:"100px"},disabled:!0},i().createElement(L.Z,{msgId:"bufferPlugin.loading"})):i().createElement("button",{key:"buffer-save",className:"btn btn-longdo-outline-info",style:{minWidth:"100px"},onClick:this.onDoBuffer},i().createElement(L.Z,{msgId:"bufferPlugin.button"})),i().createElement("button",{key:"buffer-clear",onClick:this.onReset,className:"btn btn-longdo-outline",style:{minWidth:"90px",marginRight:"5px"}},i().createElement(L.Z,{msgId:"bufferPlugin.resetButton"}))),i().createElement("br",null),"succeed"===this.props.error?i().createElement("span",{style:{color:"green"}},i().createElement(L.Z,{msgId:"bufferPlugin.successText"})):i().createElement("span",{style:{color:"red"}},this.props.error))):null}}])&&ie(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);fe(ye,"propTypes",{show:o().bool,radius:o().number,bufferLengthValue:o().array,layersNode:o().array,layersGroups:o().array,layerIndex:o().number,unitValue:o().string,loading:o().bool,error:o().string,onClose:o().func,onChangeLayer:o().func,onChangeUnit:o().func,onDoBuffer:o().func}),fe(ye,"defaultProps",{show:!1,bufferUnitValues:[{value:"kilometers",label:"km"},{value:"meters",label:"m"},{value:"วา",label:"วา"},{value:"miles",label:"miles"},{value:"degrees",label:"degrees"}],radius:1,layersNode:[],layersGroups:[],layerIndex:-1,unitValue:"",error:"",onClose:function(){},onChangeLayer:function(){},onChangeUnit:function(){},onDoBuffer:function(){}});var de=(0,l.connect)((0,c.P1)([function(e){return{layerIndex:e.buffer.layerIndex,unitValue:e.buffer.unitValue,radius:e.buffer.radius,featuresSelected:e.buffer.featuresSelected,bufferedFeatures:e.buffer.bufferedFeatures,loading:e.buffer.loading,error:e.buffer.error}},function(e){return function(e){return y()(e,"controls.buffer.enabled")}(e)},z.Bt],(function(e,t,r){return oe(oe({},e),{},{show:t,layersGroups:r,layersNode:(n=r,o=[],n.map((function(e){var t;o.push.apply(o,function(e){if(Array.isArray(e))return pe(e)}(t=e.nodes)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),o)});var n,o})),{onClose:function(){return{type:w,control:"buffer",property:null,layerSelected:{},layerIndex:-1,loading:!1,error:""}},onChangeLayer:S,onChangeUnit:function(e){return{type:g,unitValue:e}},onChangeRadius:P,onDoBuffer:function(e){return{type:h,layerSelected:e}}},null,{pure:!1})(ye);const me={BufferPlugin:f()(de,{BurgerMenu:{name:"buffer",position:10,panel:!1,help:"help",tooltip:"tooltip",text:"Buffer",icon:i().createElement(H.Glyphicon,{glyph:"resize-full"}),action:function(){return(0,d.Xg)("buffer","enabled",!0)}}}),reducers:{buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return f()({},e,{layerIndex:t.index});case g:return f()({},e,{unitValue:t.unitValue});case b:return f()({},e,{radius:t.radius});case E:return f()({},e,{loading:t.isLoading});case O:return f()({},e,{error:t.error});case w:return f()({},e,{layerSelected:t.layerSelected,layerIndex:t.layerIndex,loading:t.loading,error:t.error});default:return e}}},epics:{doBufferEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h).filter((function(){return(n().controls.buffer||{}).enabled||!1})).switchMap((function(e){var t=e.layerSelected;return A().Observable.from([B(t)])}))},addAsBufferedLayerEpic:function(e){return e.ofType(v).switchMap((function(e){var t,r=e.bufferedFtCollection;return A().Observable.of((0,N.A4)({type:"vector",id:I()(),name:"BufferedLayer",hideLoading:!0,features:(t=r.features,function(e){if(Array.isArray(e))return U(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?U(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),visibility:!0,title:"Buffered_"+M}))}))}}}},889372:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>me});var n=r(675263),o=r.n(n),a=r(124852),i=r.n(a),l=r(171703),u=r(727418),c=r.n(u),s=r(227361),f=r.n(s),p=r(607147),y=r(782904),d=r(22222),m=r(757588),b=r(807472),g=r(743129),h=r(441609),v=r.n(h);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(g.ZP),P=function(e){var t=e.responses,r=e.index,n=e.setIndex,o=O((0,a.useState)([]),2),l=o[0],u=o[1],c=O((0,a.useState)(""),2),s=c[0],f=c[1];return(0,a.useEffect)((function(){v()(t)||u(t.map((function(e,t){var r=(null==e?void 0:e.title)||(null==e?void 0:e.name);return{label:r,value:r,idx:t,style:{display:"block"}}})))}),[t]),(0,a.useEffect)((function(){var e,n;f((null===(e=t[r])||void 0===e?void 0:e.title)||(null===(n=t[r])||void 0===n?void 0:n.name)||"")}),[t,r]),i().createElement("div",{id:"identify-layer-select",style:{flex:"1 1 0%"}},i().createElement(S,E({},{clearable:!1,isSearchable:!0},{onChange:function(e){var t=(null==e?void 0:e.idx)||0;n(t)},value:s||"",options:l,noResultsText:"identifyLayerSelectNoResult"})))};P.defaultProps={responses:[],index:-1},P.propTypes={responses:o().array,setIndex:o().func,index:o().number};const x=P;var C=r(675110),R=r(805346),j="MERGELYR:SET_LAYER_1",A="MERGELYR:SET_LAYER_2",T="MERGELYR:DO_MERGE",I="MERGELYR:SET_LOADING",N="MERGELYR:ADD_AS_LAYER",L="MERGELYR:FETCH_FAILURE",_="TOGGLE_CONTROL",k=function(e){return{type:j,index1:e}},D=function(e){return{type:A,index2:e}},G=function(e){return{type:I,isLoading:e}},F=function(e){return{type:L,error:e}},U={layerIndex1:-1,layerIndex2:-1,loading:!1,error:""},M=r(375875),B=r.n(M),Z=r(49977),Y=r.n(Z),W=r(423570),H=r.n(W),z=r(47805),V=r(580416);function q(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=function(e){return new Promise((function(t,r){var n={service:"WFS",version:e.version,request:"GetFeature",typeName:e.name,outputFormat:"application/json"};if(e.layerFilter){var o=(0,z.toCQLFilter)(null==e?void 0:e.layerFilter);n.cql_filter=o}t(B().get("".concat(e.url||"/geoserver/wfs"),{params:n})),r((function(e){e(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.errorFetch"})))}))}))},X=function(e,t){for(var r=[["point","point"],["linestring","linestring"],["polygon","polygon"],["multipoint","multipoint"],["multilinestring","multilinestring"],["multipolygon","multipolygon"],["point","multipoint"],["multipoint","point"],["multilinestring","linestring"],["linestring","multilinestring"],["multipolygon","polygon"],["polygon","multipolygon"]],n=0;n<r.length;n++)if(r[n][0]===(null==e?void 0:e.toLowerCase())&&r[n][1]===(null==t?void 0:t.toLowerCase()))return!0;return!1},J=function(e){for(var t=JSON.parse(JSON.stringify(e)),r=[],n=0;n<t.features.length;n++)for(var o=0;o<t.features[n].features.length;o++)r.push(t.features[n].features[o]);return r.forEach((function(e){return delete e.style})),r},Q="",ee="",te=function(e,t){return Q=(null==e?void 0:e.title)||(null==e?void 0:e.name)||void 0,ee=(null==t?void 0:t.title)||(null==t?void 0:t.name)||void 0,e&&t?Q===ee?function(e){e(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.sameLayers"})))}:function(r){var n=function(e,t,n){if(e){for(var o=0;o<t.length;o++)for(var a=0;a<n.length;a++)if(t[o].id===n[a].id)return r(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.haveLayerAlready"}))),void r(G(!1));var l={type:"FeatureCollection",features:[].concat(q(t),q(n))};r({type:N,featureCollection:l}),r(F("succeed")),r(k(-1)),r(D(-1)),r(G(!1))}else r(F("'".concat(t[0].geometry.type,"' - '").concat(n[0].geometry.type,"' type can't be merged"))),r(G(!1))};if(r(G(!0)),r(F("")),e.features&&t.features){var o=e.features,a=t.features;"Annotations"===Q&&(o=J(e)),"Annotations"===ee&&(a=J(t)),n(X(o[0].geometry.type,a[0].geometry.type),o,a)}else if(!e.features&&t.features)K(e).then((function(e){var r=e.data.features,o=t.features;"Annotations"===ee&&(o=J(t)),n(X(r[0].geometry.type,o[0].geometry.type),r,o)})).catch((function(e){console.error(e),r(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.errorGetFeature1"}))),r(G(!1))}));else if(e.features&&!t.features)K(t).then((function(t){var r=e.features,o=t.data.features;"Annotations"===Q&&(r=J(e)),n(X(r[0].geometry.type,o[0].geometry.type),r,o)})).catch((function(e){console.error(e),r(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.errorGetFeature2"}))),r(G(!1))}));else{var l=K(e),u=K(t);Promise.all([l,u]).then((function(e){var t=e[0].data.features,r=e[1].data.features;n(X(t[0].geometry.type,r[0].geometry.type),t,r)})).catch((function(e){console.error(e),r(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.errorAllGetFeature"}))),r(G(!1))}))}}:function(e){e(F(i().createElement(R.Z,{msgId:"mergeLayerPlugin.noBothLayers"})))}};function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function le(e,t){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},le(e,t)}function ue(e,t){if(t&&("object"===re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(0,p.Yq)("mergelyr");var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(n);if(o){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ue(this,e)});function l(){var e;ae(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fe(ce(e=a.call.apply(a,[this].concat(r))),"dialogStyle",{position:"fixed",top:"0px",left:"0px",width:"500px"}),fe(ce(e),"start",{x:.5*(window.innerWidth-600),y:.5*(window.innerHeight-100)}),fe(ce(e),"onClose",(function(){e.props.onClose(!1)})),fe(ce(e),"onChangeLayer1",(function(t){e.props.onChangeLayer1(t)})),fe(ce(e),"onChangeLayer2",(function(t){e.props.onChangeLayer2(t)})),fe(ce(e),"onDoMerge",(function(){e.props.onDoMerge(e.props.layersNode[e.props.layerIndex1],e.props.layersNode[e.props.layerIndex2])})),fe(ce(e),"onReset",(function(){e.props.onChangeLayer1(-1),e.props.onChangeLayer2(-1)})),e}return t=l,(r=[{key:"render",value:function(){return this.props.show?i().createElement(b.Z,{Dialog:!0,id:"measure-dialog",style:null==this?void 0:this.dialogStyle,start:null==this?void 0:this.start},i().createElement("div",{key:"header",role:"header"},i().createElement(m.Glyphicon,{glyph:"folder-open"})," ",i().createElement(R.Z,{msgId:"mergeLayerPlugin.title"}),i().createElement("button",{key:"close",onClick:this.onClose,className:"close"},i().createElement(m.Glyphicon,{glyph:"1-close"}))),i().createElement("div",{key:"body",role:"body"},i().createElement("p",null,i().createElement(R.Z,{msgId:"mergeLayerPlugin.layerLabel1"})),i().createElement(x,{responses:this.props.layersNode,index:this.props.layerIndex1,setIndex:this.onChangeLayer1}),i().createElement("br",null),i().createElement("p",null,i().createElement(R.Z,{msgId:"mergeLayerPlugin.layerLabel2"})),i().createElement(x,{responses:this.props.layersNode,index:this.props.layerIndex2,setIndex:this.onChangeLayer2}),i().createElement("br",null),i().createElement("div",{style:{display:"flex"}},this.props.loading?i().createElement("button",{key:"mergelayer-merge",className:"btn btn-longdo-outline-info",style:{minWidth:"100px"},disabled:!0},i().createElement(R.Z,{msgId:"mergeLayerPlugin.loading"})):i().createElement("button",{key:"mergelayer-merge",className:"btn btn-longdo-outline-info",style:{minWidth:"100px"},onClick:this.onDoMerge},i().createElement(R.Z,{msgId:"mergeLayerPlugin.button"})),i().createElement("button",{key:"clear-mergelayer",className:"btn btn-longdo-outline",style:{minWidth:"90px",marginRight:"5px"},onClick:this.onReset},i().createElement(R.Z,{msgId:"mergeLayerPlugin.resetButton"}))),i().createElement("br",null),"succeed"===this.props.error?i().createElement("span",{style:{color:"green"}},i().createElement(R.Z,{msgId:"mergeLayerPlugin.successText"})):i().createElement("span",{style:{color:"red"}},this.props.error))):null}}])&&ie(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);fe(ye,"propTypes",{show:o().bool,layersNode:o().array,layersGroups:o().array,layerIndex1:o().number,layerIndex2:o().number,loading:o().bool,error:o().string,onDoMerge:o().func,onChangeLayer1:o().func,onChangeLayer2:o().func,onReset:o().func}),fe(ye,"defaultProps",{show:!1,layersNode:[],layersGroups:[],layerIndex1:-1,layerIndex2:-1,loading:!1,error:"",onDoMerge:function(){},onChangeLayer1:function(){},onChangeLayer2:function(){},onReset:function(){}});var de=(0,l.connect)((0,d.P1)([function(e){return{layerIndex1:e.mergelyr.layerIndex1,layerIndex2:e.mergelyr.layerIndex2,loading:e.mergelyr.loading,error:e.mergelyr.error,mergedLayer:e.mergelyr.mergedLayer}},function(e){return function(e){return f()(e,"controls.mergelyr.enabled")}(e)},C.Bt,C.l2],(function(e,t,r,n){return oe(oe({},e),{},{show:t,layersGroups:r,layersNode:(o=r,a=[],o.map((function(e){var t;a.push.apply(a,function(e){if(Array.isArray(e))return pe(e)}(t=e.nodes)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),a),allLayers:n});var o,a})),{onClose:function(){return{type:_,control:"mergelyr",property:null,layerSelected1:{},layerSelected2:{},layerIndex1:-1,layerIndex2:-1,loading:!1,error:""}},onChangeLayer1:k,onChangeLayer2:D,onDoMerge:function(e,t){return{type:T,layerSelected1:e,layerSelected2:t}}},null,{pure:!1})(ye);const me={MergeLayerPlugin:c()(de,{BurgerMenu:{name:"mergelyr",position:12,panel:!1,help:"help",tooltip:"tooltip",text:"Merge",icon:i().createElement(m.Glyphicon,{glyph:"plus"}),action:function(){return(0,y.Xg)("mergelyr","enabled",!0)}}}),reducers:{mergelyr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return c()({},e,{layerIndex1:t.index1});case A:return c()({},e,{layerIndex2:t.index2});case I:return c()({},e,{loading:t.isLoading});case L:return c()({},e,{error:t.error});case _:return c()({},e,{layerSelected1:t.layerSelected1,layerSelected2:t.layerSelected2,layerIndex1:t.layerIndex1,layerIndex2:t.layerIndex1,loading:t.loading,error:t.error});default:return e}}},epics:{doMergeEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(T).filter((function(){return(n().controls.mergelyr||{}).enabled||!1})).switchMap((function(e){var t=e.layerSelected1,r=e.layerSelected2;return Y().Observable.from([te(t,r)])}))},mergeAsLayerEpic:function(e){return e.ofType(N).switchMap((function(e){var t=e.featureCollection;return Y().Observable.of((0,V.A4)({type:"vector",id:H()(),name:"MergeLayer",hideLoading:!0,features:q(t.features),visibility:!0,title:"Merged_("+Q+"&"+ee+")"}))}))}}}},16528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TOGGLE_CONTROL:()=>ee,default:()=>ue});var n=r(423570),o=r.n(n),a=r(727418),i=r.n(a),l=r(124852),u=r.n(l),c=r(375875),s=r.n(c),f=r(49977),p=r.n(f),y=r(675263),d=r.n(y),m=r(185552),b=r.n(m),g=r(168898),h=r(282467),v=r(732833),E=r(965539),O=r(496259),w=r(743129),S=r(441609),P=r.n(S);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=(0,r(993451).Z)(["placeholder","clearValueText","noResultsText"])(w.ZP),A=function(e){var t=e.responses,r=e.index,n=e.setIndex,o=C((0,l.useState)([]),2),a=o[0],i=o[1],c=C((0,l.useState)(""),2),s=c[0],f=c[1];return(0,l.useEffect)((function(){P()(t)||(t.reverse(),i(t.map((function(e,t){var r=null==e?void 0:e.title;return{label:r,value:r,idx:t,style:{display:"block"}}}))))}),[t]),(0,l.useEffect)((function(){var e;f((null===(e=t[r])||void 0===e?void 0:e.title)||"")}),[t,r]),u().createElement("div",{id:"identify-layer-select",style:{flex:"1 1 0%"}},u().createElement(j,x({},{clearable:!1,isSearchable:!0},{onChange:function(e){var t=(null==e?void 0:e.idx)||0;n(t)},value:s||"",options:a,noResultsText:"identifyLayerSelectNoResult"})))};A.defaultProps={responses:[],index:-1},A.propTypes={responses:d().array,setIndex:d().func,index:d().number};const T=A;var I=r(227361),N=r.n(I),L=r(782904),_=r(757588),k=r(607147),D=r(22222),G=r(171703),F=r(604206),U=r(675110);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(this,arguments)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function V(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return q(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){if(e){if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee="TOGGLE_CONTROL";(0,k.Yq)("nearby");var te=function(e){return{type:"SET_NEARBY_CENTER",center:e}},re=function(e){return{type:"NEARBY_FEATURE_LOADED",features:e}},ne=function(e,t,r,n){n||(n={});var a="/geoserver/wfs";return function(i){s().get(n.url||a,{params:{service:"WFS",version:n.version,request:"DescribeFeatureType",typeName:n.name,outputFormat:"application/json"}}).then((function(l){var u=l.data.featureTypes[0];try{var c=u.properties.find((function(e){return"Point"===e.localType}));if(null!==c.name||"undefined"!==c.name){var f=t.y+" "+t.x;s().get("".concat(n.url||a),{params:{service:"WFS",version:n.version,request:"GetFeature",typeNames:n.name,outputFormat:"application/json",SRSName:"EPSG:4326",cql_filter:"DWithin(".concat(c.name,",POINT(").concat(f,"),").concat(e,",meters)")}}).then((function(e){var t=e.data.features;t.map((function(e){"Point"===e.geometry.type&&(e.style={iconGlyph:"map-marker",iconShape:"circle",iconColor:"blue",highlight:!1,id:o()()})})),t.push(r),i(re(t))}))}}catch(e){console.error(e),i(re([]))}})).catch((function(e){console.error(e),i(re([]))}))}},oe=function(e,t){return{type:"Feature",geometry:t,properties:{isCircle:!0,radius:e,id:o()(),crs:"EPSG:3857",isGeodesic:!0},style:[{color:"#48C9B0",opacity:1,weight:5,fillColor:"#ffffff",fillOpacity:.3,highlight:!1,type:"Circle",title:"Near by",id:o()}]}},ae={radius:1,center:null,centerLocked:!1,centerFixed:{},results:[],nearbyLists:[],layer:{},layerIndex:-1,totalPage:0,pageSize:25,currentPage:1},ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(i,e);var t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(n);if(o){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return V(this,e)});function i(){var e;W(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return K(q(e=a.call.apply(a,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),K(q(e),"onChangeRadius",(function(t){e.props.onChangeRadius(t)})),K(q(e),"onLayerChange",(function(t){var r=e.props.layersNode[t];e.props.onChangeLayer(r,t)})),K(q(e),"onLockCenter",(function(){e.props.onLockCenter()})),K(q(e),"changePage",(function(t){e.props.onChangePage(t)})),K(q(e),"start",{x:.5*(window.innerWidth-600),y:.5*(window.innerHeight-100)}),K(q(e),"dialogStyle",{position:"fixed",top:"0px",left:"0px"}),e}return t=i,(r=[{key:"renderHeader",value:function(){return u().createElement("div",{style:{width:"100%"}},u().createElement("div",{style:{display:"flex",alignItems:"center"}},u().createElement("div",null,u().createElement(h.Z,{className:"square-button no-events"},u().createElement(_.Glyphicon,{glyph:"record"}))),u().createElement("div",{style:{flex:"1 1 0%",padding:8,textAlign:"center"}},u().createElement("h4",null,"Nearby")),u().createElement("div",null,u().createElement(h.Z,{className:"square-button no-border",onClick:this.onClose},u().createElement(_.Glyphicon,{glyph:"1-close"})))))}},{key:"render",value:function(){var e,t,r,n=this,o=[],a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=J(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(this.props.results.entries());try{for(a.s();!(e=a.n()).done;){var i=(t=e.value,r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||J(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=i[0],c=i[1];o.push(u().createElement("li",{key:l},c.properties.title_en||"No title"))}}catch(e){a.e(e)}finally{a.f()}return this.props.show?u().createElement(O.Z,null,(function(e){var t=e.width;return u().createElement("span",{className:"react-dock-no-resize"},u().createElement(v.default,Y({fluid:!0,dockStyle:n.props.dockStyle},n.props.dockProps,{isVisible:n.props.show,size:330/t>1?1:330/t}),u().createElement(E.Z,{header:n.renderHeader()},u().createElement("div",{style:{padding:"10px"}},u().createElement("label",null,"Layers"),u().createElement("div",null,u().createElement(T,{responses:n.props.layersNode,index:n.props.layerIndex,setIndex:n.onLayerChange})),u().createElement("div",{className:"btn-toolbar",style:{marginTop:"10px"}},u().createElement("div",{className:"row"},u().createElement("div",{className:"col-md-6"},u().createElement("label",null,"Radius (km)")),u().createElement("div",{className:"col-md-6 text-right"},u().createElement("button",{onClick:n.onLockCenter,style:{float:"right"},className:n.props.centerLocked?"btn btn-xs active":"btn btn-xs"},u().createElement(_.Glyphicon,{glyph:"lock"}))))),u().createElement("div",{className:"mapstore-slider with-tooltip"},u().createElement(b(),{tooltips:!0,step:.1,start:[n.props.radius],range:{min:[0],max:[20]},onChange:function(e){n.onChangeRadius(e[0])}})),u().createElement("div",{className:"location-list"},u().createElement("div",{className:"locations"},o),o.length>0?u().createElement("div",{style:{textAlign:"center"}},u().createElement(_.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:n.props.totalPage,maxButtons:5,activePage:n.props.currentPage,onSelect:n.changePage})):u().createElement("div",null))))))})):null}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(u().Component);K(ie,"propTypes",{show:d().bool,radius:d().number,results:d().array,nearbyLists:d().array,centerLocked:d().bool,centerFixed:d().object,onLockCenter:d().func,onClose:d().func,onChangeRadius:d().func,onChangeLayer:d().func,dockProps:d().object,layersGroups:d().array,layersNode:d().array,layerIndex:d().number,totalPage:d().number,pageSize:d().number,currentPage:d().number,changePage:d().func}),K(ie,"defaultProps",{show:!1,radius:1,centerLocked:!1,centerFixed:{},results:[],nearbyLists:[],dockProps:{dimMode:"none",size:.3,fluid:!0,position:"right",zIndex:1030},dockStyle:{},layersGroups:[],layersNode:[],layerIndex:-1,totalPage:0,pageSize:5,currentPage:1,changePage:function(){}});var le=(0,G.connect)((0,D.P1)([function(e){return{radius:e.nearby.radius,center:e.nearby.center,centerLocked:e.nearby.centerLocked,centerFixed:e.nearby.centerFixed,results:e.nearby.results,layer:e.nearby.layer,layerIndex:e.nearby.layerIndex,totalPage:e.nearby.totalPage,pageSize:e.nearby.pageSize,currentPage:e.nearby.currentPage}},function(e){return function(e){return N()(e,"controls.nearby.enabled")}(e)},U.Bt],(function(e,t,r){return Z(Z({},e),{},{show:t,layersGroups:r,layersNode:(n=r,o=[],n.map((function(e){o.push.apply(o,X(e.nodes))})),o)});var n,o})),{onClose:function(){return{type:ee,control:"nearby",property:null,layer:{},index:-1}},onChangeRadius:function(e){return{type:"SET_NEARBY_RADIUS",radius:Number(e)||1}},onChangeLayer:function(e,t){return{type:"SET_LAYER_FILTER",layer:e,index:t}},onLockCenter:function(){return{type:"NEARBY:CENTER_MAP_LOCK"}},onChangePage:function(e){return{type:"NEARBY:CHANGE_PAGE_NUMBER",page:e}}},null,{pure:!1})(ie);const ue={NearbyPlugin:i()(le,{BurgerMenu:{name:"nearby",position:9,panel:!1,help:"help",tooltip:"tooltip",text:"Nearby",icon:u().createElement(_.Glyphicon,{glyph:"record"}),action:function(){return(0,L.Xg)("nearby","enabled",!0)}}}),reducers:{nearby:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEARBY_RADIUS":return i()({},e,{radius:t.radius});case"SET_LAYER_FILTER":return i()({},e,{layer:t.layer,layerIndex:t.index});case"SET_NEARBY_CENTER":return i()({},e,{center:t.center});case"NEARBY_FEATURE_LOADED":return i()({},e,{nearbyLists:t.features,results:t.features.length>e.pageSize?t.features.slice(0,e.pageSize):t.features,totalPage:t.features.length>e.pageSize?Math.floor(t.features.length/e.pageSize):1,currentPage:1});case"NEARBY:CENTER_MAP_LOCK":return i()({},e,{centerFixed:e.center,centerLocked:!e.centerLocked});case"NEARBY:CHANGE_PAGE_NUMBER":return i()({},e,{results:e.nearbyLists.slice((t.page-1)*e.pageSize,t.page*e.pageSize),currentPage:t.page});case ee:return i()({},e,{layer:t.layer,layerIndex:t.index});default:return e}}},epics:{changeCenterEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("CHANGE_MAP_VIEW").filter((function(){return(n().controls.nearby||{}).enabled||!1})).switchMap((function(e){var t=e.center,r=n().nearby.radius,o=n().nearby.layer,a=n().nearby.centerFixed,i=n().nearby.centerLocked,l=(0,g.Z)([i?a.x:t.x,i?a.y:t.y],r,{steps:100,units:"kilometers"}).geometry,u=oe(r,l);return i?p().Observable.empty():p().Observable.from([te(t),ne(1e3*r,t,u,o)])}))},changeRadiusEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("SET_NEARBY_RADIUS").filter((function(){return(n().controls.nearby||{}).enabled||!1})).switchMap((function(e){var t=e.radius,r=n().map.present.center,o=n().nearby.centerFixed,a=n().nearby.centerLocked,i=n().nearby.layer,l=(0,g.Z)([a?o.x:r.x,a?o.y:r.y],t,{steps:100,units:"kilometers"}).geometry,u=oe(t,l);return p().Observable.from([ne(1e3*t,r,u,i)])}))},nearbyResultLoadedEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("NEARBY_FEATURE_LOADED").filter((function(){return(n().controls.nearby||{}).enabled||!1})).switchMap((function(){var e=n().map.present.center,t=n().nearby.radius,r=(0,g.Z)([e.x,e.y],t,{steps:100,units:"kilometers"}).geometry,a=oe(t,r),i=n().nearby.results,l=[{type:"FeatureCollection",newFeature:!0,id:o()(),geometry:null,properties:o()(),features:[].concat(X(i),[a])}];return p().Observable.from([(0,F.Yf)("drawOrEdit","Point","nearbyResult",l,{featureProjection:"EPSG:4326",stopAfterDrawing:!0,editEnabled:!1,selectEnabled:!0,translateEnabled:!1,drawEnabled:!1})])}))},changeLayerEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("SET_LAYER_FILTER").filter((function(){return(n().controls.nearby||{}).enabled||!1})).switchMap((function(e){var t=e.layer,r=n().map.present.center,o=n().nearby.radius,a=(0,g.Z)([r.x,r.y],o,{steps:100,units:"kilometers"}).geometry,i=oe(o,a);return p().Observable.from([ne(1e3*o,r,i,t)])}))},closeNearbyDock:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType(ee).filter((function(){return n().controls.nearby||{}||!1})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),p().Observable.from([function(e){e(re([]))},(0,F.Yf)("clean","","nearbyResult",[],{})])}))},changePageEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("NEARBY:CHANGE_PAGE_NUMBER").filter((function(){return(n().controls.nearby||{}).enabled||!1})).switchMap((function(){var e=n().map.present.center,t=n().nearby.radius,r=n().nearby.centerFixed,a=n().nearby.centerLocked,i=(0,g.Z)([a?r.x:e.x,a?r.y:e.y],t,{steps:100,units:"kilometers"}).geometry,l=oe(t,i),u=n().nearby.results,c=[{type:"FeatureCollection",newFeature:!0,id:o()(),geometry:null,properties:o()(),features:[].concat(X(u),[l])}];return p().Observable.from([(0,F.Yf)("drawOrEdit","Point","nearbyResult",c,{featureProjection:"EPSG:4326",stopAfterDrawing:!0,editEnabled:!1,selectEnabled:!0,translateEnabled:!1,drawEnabled:!1})])}))}}}},893995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ae});var n=r(727418),o=r.n(n),a=r(124852),i=r.n(a),l=r(171703),u=r(22222),c=r(675263),s=r.n(c),f=r(227361),p=r.n(f),y=r(732833),d=r(496259),m=r(282467),b=r(532425),g=r(965539),h=r(782904),v=r(757588),E=r(607147),O=r(423570),w=r.n(O),S=function(e){switch(e){case"START":default:return{iconGlyph:"map-marker",iconShape:"square",iconColor:"blue",highlight:!1,id:w()()};case"END":return{iconGlyph:"stop-circle",iconShape:"square",iconColor:"blue",highlight:!1,id:w()()}}};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x="https://api.longdo.com/RouteService/geojson/route",C="8691719DEAE84A8D8BEEF76393A8D03F",R=r(409669).create(),j=function(e){return{type:"ROUTING_FEATURE_LOADED",features:e}},A=function(e,t,r){return function(n){return R.get("https://search.longdo.com/mapsearch/json/search",{params:{lat:r.y,lon:r.x,keyword:t,locale:"th",key:C}}).then((function(t){n(function(e,t){return{type:"ROUTING_SEARCH_LOADED",index:e,result:t}}(e,t.data))}))}};const T={start:{x:.5*(window.innerWidth-600),y:.5*(window.innerHeight-500)},dialogStyle:{position:"fixed",top:"0px",left:"0px"},routingGuideList:{marginTop:"10px",paddingRight:"10px",overflow:"auto"},guideStyle:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",cursor:"pointer"},turnStyle:{width:"36px",height:"36px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",padding:"12px 0px"},turnImageStyle:{width:"16px",height:"16px"},distanceStyle:{marginLeft:"auto"},resultListStyle:{borderLeft:"1px solid #dddddd",borderRight:"1px solid #dddddd",position:"absolute",background:"white",maxHeight:"600px",overflowY:"auto",width:"90.5%",zIndex:20,marginTop:"11.5%"},resultListStyleWithRemove:{borderLeft:"1px solid #dddddd",borderRight:"1px solid #dddddd",position:"absolute",background:"white",maxHeight:"600px",overflowY:"auto",width:"80.5%",marginTop:"12.1%",zIndex:20},resultStyle:{padding:"6px 12px",cursor:"pointer"}};var I={displaySetting:!1,pointList:[{lat:null,lon:null,keyword:"",searchResult:{}},{lat:null,lon:null,keyword:"",searchResult:{}}],features:[],routeType:[],routeMode:null},N=r(49977),L=r.n(N),_=r(604206),k=r(801550),D=r(340708);function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H.apply(this,arguments)}function z(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=V(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}function V(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function J(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,E.Yq)("routing");var re=h.Xi.bind(null,"routing",null),ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(o){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return J(this,e)});function l(){var e;$(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return te(Q(e=a.call.apply(a,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),te(Q(e),"onAddPoint",(function(){e.props.onAddPoint()})),te(Q(e),"onSwapPoint",(function(){e.props.onSwapPoint()})),te(Q(e),"onRemovePoint",(function(t){return function(){e.props.onRemovePoint(t)}})),te(Q(e),"onDisplaySetting",(function(){e.props.onDisplaySetting()})),te(Q(e),"onSearch",(function(){var t=e.props.pointList.find((function(e){if(!e.lat||!e.lon)return e})),r=e.props.routeMode,n=e.props.routeType;!t||t.lat?(document.getElementById("find-route").innerHTML="กำลังค้นหา...",e.props.onSearch(e.props.pointList,r,n)):document.getElementById("find-route").innerHTML="ค้นหาเส้นทาง"})),te(Q(e),"onClearSearch",(function(){e.props.onClearSearch(e.props)})),te(Q(e),"onChangePointInput",(function(t){return function(r){e.props.onChangePointInput(t,r.nativeEvent.target.value)}})),te(Q(e),"onClickGuide",(function(t){return function(){e.props.onClickGuide(t)}})),te(Q(e),"onClickSearchResult",(function(t,r,n){return function(){e.props.onClickSearchResult(t,r,n)}})),te(Q(e),"onChangeRouteMode",(function(t){return e.props.onChangeRouteMode(t.target.value)})),te(Q(e),"onChangeRouteType",(function(t){return e.props.onChangeRouteType(t.target.value)})),te(Q(e),"renderEastimateTime",(function(e){var t=~~(e/3600),r=~~(e%3600/60),n="";return t>0&&(n+=t+" ชั่วโมง "+(r<10?"0":"")),n+(r+" นาที ")})),te(Q(e),"renderGuideList",(function(t,r,n){return i().createElement("div",null,i().createElement("div",{className:"panel panel-primary",style:{marginTop:"10px"}},i().createElement("div",{className:"panel-heading"},i().createElement(v.Row,null,i().createElement(v.Col,{md:6},e.renderEastimateTime(r)),i().createElement(v.Col,{md:6,style:{textAlign:"right"}},"ระยะทาง:"," ",n>1e3?(n/1e3).toFixed(2)+" กม.":n+" เมตร"))),i().createElement("div",{className:"panel-body"},i().createElement("div",{style:T.routingGuideList,key:"routing-guide"},t))))})),te(Q(e),"renderLoading",(function(){return i().createElement("div",{className:"loading"},i().createElement(b.Z,{size:176}))})),e}return t=l,(r=[{key:"componentDidMount",value:function(){new Promise((function(e){var t="longdo-map-js-api";if(window.document.getElementById(t))e();else{var r=window.document.createElement("script");r.setAttribute("id",t),r.setAttribute("src","https://api.longdo.com/map/?key=8691719DEAE84A8D8BEEF76393A8D03F"),r.onload=function(){e()},window.document.head.appendChild(r)}}))}},{key:"renderHeader",value:function(){return i().createElement("div",{style:{width:"100%"}},i().createElement("div",{style:{display:"flex",alignItems:"center"}},i().createElement("div",null,i().createElement(m.Z,{className:"square-button no-events"},i().createElement(v.Glyphicon,{glyph:"record"}))),i().createElement("div",{style:{flex:"1 1 0%",padding:8,textAlign:"center"}},i().createElement("h4",null,"Routes")),i().createElement("div",null,i().createElement(m.Z,{className:"square-button no-border",onClick:this.onClose},i().createElement(v.Glyphicon,{glyph:"1-close"})))))}},{key:"render",value:function(){var e,t=this,r=[],n=z(this.props.pointList.entries());try{for(n.s();!(e=n.n()).done;){var o,a=W(e.value,2),l=a[0],u=a[1],c="".concat(0===l?"กำหนดจุดเริ่มต้น":"เลือกจุดหมาย"),s=u.keyword,f=u.searchResult.data||[],p=[],m=z(f.entries());try{for(m.s();!(o=m.n()).done;){var b=W(o.value,2),h=b[0],E=b[1];p.push(i().createElement("div",{style:T.resultStyle,key:"result-".concat(h,"-input-").concat(l),onClick:this.onClickSearchResult(l,h,E)},E.name))}}catch(e){m.e(e)}finally{m.f()}r.push(i().createElement("div",{style:{position:"relative"}},i().createElement("div",{key:"point-".concat(l+1),className:"input-group"},i().createElement("span",{className:"input-group-addon",style:{border:"none",background:"none"}},0===l?i().createElement(v.Glyphicon,{glyph:"pushpin"}):i().createElement(v.Glyphicon,{glyph:"record"})),i().createElement("input",{type:"text",key:"point-input-".concat(l+1),value:s,className:"form-control",style:{marginTop:"7px"},onChange:this.onChangePointInput(l),placeholder:c}),i().createElement("div",{style:l>=2?T.resultListStyleWithRemove:T.resultListStyle},p),l>=2?i().createElement("span",{onClick:this.onRemovePoint(l),className:"input-group-addon",id:"btn-rm-".concat(l),style:{border:"none",background:"none"}},i().createElement(v.Glyphicon,{glyph:"remove"})):i().createElement("span",{className:"input-group-addon",onClick:this.onRemovePoint(l),id:"btn-rm-".concat(l),style:{display:"none",border:"none",background:"none"}},i().createElement(v.Glyphicon,{glyph:"remove"})))))}}catch(e){n.e(e)}finally{n.f()}var O,w=[],S=0,P=0,x=z(this.props.features.entries());try{for(x.s();!(O=x.n()).done;){var C=W(O.value,2),R=(C[0],C[1]);if("LineString"===R.geometry.type){S+=R.properties.interval,P+=R.properties.distance;var j="https://api.longdo.com/RouteService/images/turn".concat(R.properties.turn,".png"),A=R.properties.distance<1e3?"".concat(R.properties.distance," m"):"".concat((R.properties.distance/1e3).toFixed(1)," km");w.push(i().createElement("div",{className:"routing-guide",style:T.guideStyle,onClick:this.onClickGuide(R)},i().createElement("div",{className:"turn",style:T.turnStyle},i().createElement("img",{style:T.turnImageStyle,src:j})),i().createElement("div",{className:"detail"},R.properties.name),i().createElement("div",{className:"distance",style:T.distanceStyle},A)))}}}catch(e){x.e(e)}finally{x.f()}return this.props.show?i().createElement(d.Z,{id:"routingContainer"},(function(e){var n=e.width;return i().createElement("span",{className:"react-dock-no-resize"},i().createElement(y.default,H({fluid:!0,dockStyle:t.props.dockStyle},t.props.dockProps,{isVisible:t.props.show,size:330/n>1?1:330/n}),i().createElement(g.Z,{header:t.renderHeader()},i().createElement("div",{key:"routing-body",role:"body",style:{padding:"10px"}},r,i().createElement("br",null),t.props.displaySetting?i().createElement("div",{className:"route-option",style:{textAlign:"center",paddingLeft:"10%",marginBottom:"5%"}},i().createElement(v.Row,null,i().createElement(v.Col,{md:6,style:{textAlign:"left"}},i().createElement("label",null,"โหมดการเดินทาง"),i().createElement("div",{onChange:t.onChangeRouteMode},i().createElement("div",{className:"radio"},i().createElement("label",null,i().createElement("input",{type:"radio",name:"routeMode",value:"t"}),"ระยะเวลาน้อยสุด")),i().createElement("div",{className:"radio"},i().createElement("label",null,i().createElement("input",{type:"radio",name:"routeMode",value:"d"}),"ระยะทางน้อยสุด")),i().createElement("div",{className:"radio"},i().createElement("label",null,i().createElement("input",{type:"radio",name:"routeMode",value:"c"}),"ประหยัดค่าใช้จ่าย")))),i().createElement(v.Col,{md:6,style:{textAlign:"left"}},i().createElement("label",null,"วิธีการเดินทาง"),i().createElement("div",{onChange:t.onChangeRouteType},i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",name:"routeType",value:"1"}),"ถนนหลัก")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"16",name:"routeType"}),"ทางด่วน")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"32",name:"routeType"}),"รถประจำทาง")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"64",name:"routeType"}),"รถไฟฟ้า")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"4",name:"routeType"}),"รถไฟ")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"8",name:"routeType"}),"เรือ")),i().createElement("div",{className:"checkbox"},i().createElement("label",null,i().createElement("input",{type:"checkbox",value:"2",name:"routeType"}),"อากาศ")))))):i().createElement("div",null),i().createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i().createElement("div",null,i().createElement("button",{key:"add-point",className:"btn btn-londo-circle-sm",onClick:t.onAddPoint},i().createElement(v.Glyphicon,{glyph:"plus"})),i().createElement("button",{key:"swap-point",className:"btn btn-londo-circle-sm",style:{marginLeft:"5px"},onClick:t.onSwapPoint},i().createElement(v.Glyphicon,{glyph:"sort"})),i().createElement("button",{key:"setting",className:"btn btn-londo-circle-sm",style:{marginLeft:"5px"},onClick:t.onDisplaySetting},i().createElement(v.Glyphicon,{glyph:"cog"}))),i().createElement("div",null,i().createElement("button",{key:"clear-routing",onClick:t.onClearSearch,className:"btn btn-longdo-outline-default btn-rounded",style:{minWidth:"90px",marginRight:"5px"}},"ล้าง"),i().createElement("button",{key:"search-routing",onClick:t.onSearch,className:"btn btn-longdo-outline-info btn-rounded",style:{minWidth:"100px"},id:"find-route"},"ค้นหาเส้นทาง"))),0!==w.length?t.renderGuideList(w,S,P):i().createElement("div",null)))))})):null}}])&&K(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);te(ne,"propTypes",{show:s().bool,displaySetting:s().bool,dockProps:s().object,loading:s().bool,pointList:s().array,features:s().array,routeMode:s().string,routeType:s().array,onClose:s().func,onSwapPoint:s().func,onAddPoint:s().func,onRemovePoint:s().func,onSearch:s().func,onChangePointInput:s().func,onClickGuide:s().func,onClickSearchResult:s().func,onChangeRouteMode:s().func}),te(ne,"defaultProps",{show:!1,displaySetting:!1,dockProps:{dimMode:"none",size:.3,fluid:!0,position:"right",zIndex:1030},loading:!1,routeMode:null,routeType:[],pointList:[{lat:null,lon:null},{lat:null,lon:null}],features:[]});var oe=(0,l.connect)((0,u.P1)([function(e){return{pointList:e.routing.pointList,displaySetting:e.routing.displaySetting,features:e.routing.features,routeMode:e.routing.routeMode,routeType:e.routing.routeType}},function(e){return function(e){return p()(e,"controls.routing.enabled")}(e)}],(function(e,t){return Y(Y({},e),{},{show:t})})),{onClose:re,onDisplaySetting:function(){return{type:"ROUTING_DISPLAY_SETTING"}},onAddPoint:function(){return{type:"ROUTING_ADD_POINT"}},onSwapPoint:function(){return{type:"ROUTING_SWAP_POINT"}},onRemovePoint:function(e){return{type:"ROUTING_REMOVE_POINT",index:e}},onSearch:function(e,t,r){return function(n){var o=0===r.length?null:r.reduce((function(e,t){return Number.parseInt(e,10)+Number.parseInt(t,10)}),0);new Promise((function(r){setTimeout((function(){var n=R.get(x,{params:{flon:e[0].lon,flat:e[0].lat,tlon:e[1].lon,tlat:e[1].lat,locale:"th",mode:t,type:o,key:C}});r(n)}),2e3)})).then((function(r){var a=r.data.features,i=a.length,l=a[i-1].geometry.coordinates.length,u=a[i-1].geometry.coordinates[l-1][0],c=a[i-1].geometry.coordinates[l-1][1];if(2===e.length)a.push({type:"Feature",style:[S("START")],geometry:{type:"Point",coordinates:[a[0].geometry.coordinates[0][0],a[0].geometry.coordinates[0][1]]}}),a.push({type:"Feature",style:[S("END")],geometry:{type:"Point",coordinates:[u,c]}}),n(j(a)),document.getElementById("find-route").innerHTML="ค้นหาเส้นทาง";else{a.push({type:"Feature",style:[S("START")],geometry:{type:"Point",coordinates:[a[0].geometry.coordinates[0][0],a[0].geometry.coordinates[0][1]]}}),a.push({type:"Feature",style:[S("START")],geometry:{type:"Point",coordinates:[u,c]}});for(var s=function(r){var i=u,l=c;new Promise((function(n){setTimeout((function(){var a=R.get(x,{params:{flon:i,flat:l,tlon:e[r].lon,tlat:e[r].lat,locale:"th",mode:t,type:o,key:C}});n(a)}),2e3)})).then((function(t){var o,i=t.data.features[t.data.features.length-1].geometry.coordinates.length,l=t.data.features[t.data.features.length-1].geometry.coordinates[i-1][0],u=t.data.features[t.data.features.length-1].geometry.coordinates[i-1][1];a.push({type:"Feature",style:[S("START")],geometry:{type:"Point",coordinates:[l,u]}}),a.push.apply(a,function(e){if(Array.isArray(e))return P(e)}(o=t.data.features)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r+1===e.length&&(n(j(a)),document.getElementById("find-route").innerHTML="ค้นหาเส้นทาง")}))},f=2;f<e.length;f++)s(f)}}))}},onClearSearch:function(e){return{type:"ROUTING_FEATURE_CLEAR",features:e.features}},onChangePointInput:function(e,t){return{type:"ROUTING_CHANGE_POINT_LIST",index:e,value:t}},onClickGuide:function(e){return{type:"ROUTING_CLICK_GUIDE",value:e}},onClickSearchResult:function(e,t,r){return{type:"ROUTING_CLICK_SEARCH_RESULT",i:e,j:t,result:r}},onChangeRouteMode:function(e){return{type:"ROUTING_CHANGE_MODE",value:e}},onChangeRouteType:function(e){return{type:"ROUTING_CHANGE_TYPE",value:e}}},null,{pure:!1})(ne);const ae={RoutingPlugin:o()(oe,{BurgerMenu:{name:"routing",position:9,panel:!1,help:"help",tooltip:"tooltip",text:"Routing",icon:i().createElement(v.Glyphicon,{glyph:"search"}),action:function(){return(0,h.Xg)("routing","enabled",!0)}}}),reducers:{routing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROUTING_ADD_POINT":return e.pointList.length>=2&&e.pointList.map((function(e,t){document.getElementById("btn-rm-".concat(t)).style.display=null})),o()({},e,{pointList:e.pointList.concat([{lat:null,lon:null,keyword:"",searchResult:{}}])});case"ROUTING_REMOVE_POINT":return 2===e.pointList.length?e:(e.pointList.splice(t.index,1),e.pointList.length<=2&&e.pointList.map((function(e,t){document.getElementById("btn-rm-".concat(t)).style.display="none"})),o()({},e,{}));case"ROUTING_SWAP_POINT":return o()({},e,{pointList:e.pointList.reverse()});case"ROUTING_CHANGE_POINT_LIST":var r=t.value.trim().split(","),n=r[0],a=r.length>1?r[1]:null;return o()({},e,{pointList:e.pointList.map((function(e,r){return t.index===r?o()({},e,{lat:n,lon:a,keyword:t.value}):e}))});case"ROUTING_DISPLAY_SETTING":return o()({},e,{displaySetting:!e.displaySetting});case"ROUTING_CHANGE_MODE":return o()({},e,{routeMode:t.value});case"ROUTING_CHANGE_TYPE":var i=e.routeType.indexOf(t.value);return-1===i?o()({},e,{routeType:e.routeType.concat(t.value)}):o()({},e,{routeType:0===i?[]:e.routeType.splice(t.value,1)});case"ROUTING_FEATURE_LOADED":return o()({},e,{features:t.features});case"ROUTING_SEARCH_LOADED":return o()({},e,{pointList:e.pointList.map((function(e,r){return t.index===r?o()({},e,{searchResult:t.result}):e}))});case"ROUTING_CLICK_SEARCH_RESULT":return o()({},e,{pointList:e.pointList.map((function(e,r){return t.i===r?o()({},e,{lat:Number(t.result.lat),lon:Number(t.result.lon),keyword:t.result.name,searchResult:[]}):e}))});case"ROUTING_FEATURE_CLEAR":return o()({},e,{features:[],pointList:[{lat:null,lon:null,keyword:"",searchResult:{}},{lat:null,lon:null,keyword:"",searchResult:{}}]});default:return e}}},epics:{routingResultLoadedEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("ROUTING_FEATURE_LOADED").filter((function(){return(n().controls.routing||{}).enabled||!1})).switchMap((function(e){var t=e.features,r=[];t.forEach((function(e){r=r.concat(e.geometry.coordinates.map((function(e){return{lat:e[1],lon:e[0]}})))}));var n,o=t.map((function(e){return e.properties=U(U({},e.properties),{},{id:w()(),isValidFeature:!0,canEdit:!1}),"LineString"===e.geometry.type&&(e.style=[{color:"#006994",opacity:1,weight:4,editing:{fill:1},highlight:!1,id:w()()}]),e})),a=(0,D.locationBound)(r),i=[{type:"FeatureCollection",newFeature:!0,id:w()(),geometry:null,properties:w()(),features:(n=o,function(e){if(Array.isArray(e))return G(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}];return L().Observable.from([(0,_.Yf)("clean","","routingResult",[],{}),(0,_.Yf)("drawOrEdit","LineString","routingResult",i,{featureProjection:"EPSG:4326",stopAfterDrawing:!0,editEnabled:!1,selectEnabled:!0,translateEnabled:!1,drawEnabled:!1},{highlight:!1}),(0,k.Px)([a.minLon,a.minLat,a.maxLon,a.maxLat],"EPSG:4326",10,{nearest:!0})])}))},routingClickGuideEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("ROUTING_CLICK_GUIDE").filter((function(){return(n().controls.routing||{}).enabled||!1})).switchMap((function(e){var t=e.value.geometry.coordinates.map((function(e){return{lat:e[1],lon:e[0]}})),r=(0,D.locationBound)(t);return L().Observable.from([(0,k.Px)([r.minLon,r.minLat,r.maxLon,r.maxLat],"EPSG:4326",16,{nearest:!0})])}))},routingChangePointInputEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("ROUTING_CHANGE_POINT_LIST").debounceTime(300).filter((function(){return(n().controls.routing||{}).enabled||!1})).switchMap((function(e){var t=e.index,r=e.value,o=n().map.present.center;return L().Observable.from([A(t,r,o)])}))},onSwapRoutingEpic:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("ROUTING_SWAP_POINT").filter((function(){return(n().controls.routing||{}).enabled||!1})).switchMap((function(e){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e)}))},clearRoutingResult:function(e,t){var r=t.getState,n=void 0===r?function(){}:r;return e.ofType("ROUTING_FEATURE_CLEAR").filter((function(){return(n().controls.routing||{}).enabled||!1})).switchMap((function(){return L().Observable.from([(0,_.Yf)("clean","","routingResult",[],{})])}))}}}}}]);
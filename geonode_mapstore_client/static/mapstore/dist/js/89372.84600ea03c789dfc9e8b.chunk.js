(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[89372],{807472:(e,r,t)=>{"use strict";t.d(r,{Z:()=>S});var n=t(727418),o=t.n(n),a=t(675263),l=t.n(a),i=t(124852),c=t.n(i),s=t(485294),u=t.n(s),f=t(472986),p=t.n(f),y=t(805346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){w(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function b(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,r){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},v(e,r)}function O(e,r){if(r&&("object"===d(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var P=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&v(e,r)}(i,e);var r,t,n,a,l=(n=i,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=j(n);if(a){var t=j(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return O(this,e)});function i(){var e;b(this,i);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return w(E(e=l.call.apply(l,[this].concat(t))),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(y.Z,{msgId:"loading"}),c().createElement(p(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),w(E(e),"renderRole",(function(r){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===r}))})),w(E(e),"hasRole",(function(r){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===r})).length>0})),w(E(e),"onClickOut",(function(r){e.props.onClickOut&&e.mask===r.target&&e.props.onClickOut(r)})),e}return r=i,(t=[{key:"render",value:function(){var e=this,r=c().createElement("div",{id:this.props.id,style:m({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null)),t=this.props.draggable?c().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},r):r,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(r){e.mask=r},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},t):t}}])&&h(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),i}(c().Component);w(P,"propTypes",{id:l().string.isRequired,style:l().object,backgroundStyle:l().object,className:l().string,maskLoading:l().bool,containerClassName:l().string,headerClassName:l().string,bodyClassName:l().string,footerClassName:l().string,onClickOut:l().func,modal:l().bool,start:l().object,draggable:l().bool,bounds:l().oneOfType([l().string,l().object])}),w(P,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const S=P},993451:(e,r,t)=>{"use strict";t.d(r,{Z:()=>j});var n=t(86638),o=t(675263),a=t.n(o),l=t(984596),i=t.n(l),c=t(701469),s=t.n(c),u=t(414293),f=t.n(u),p=t(747037),y=t.n(p),d=t(867076),g=["messages"];function m(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){v(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function v(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var O=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(r))return r.map((function(o){var a=(0,n.S$)(e,o[t]||y()(o)&&o||"");return h(h({},o),{},v({},t,f()(a)?r:a))}));var o=(0,n.S$)(e,r);return f()(o)?r:o},E=function(e,r,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return h(h({},n),{},v({},o,e[o]&&O(r,e[o],t)))}};const j=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,d.compose)((0,d.getContext)({messages:a().object}),(0,d.mapProps)((function(t){var n=t.messages,o=m(t,g);return h(h({},o),i()(e).reduce(E(o,n,r),{}))})))}},889372:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>ge});var n=t(675263),o=t.n(n),a=t(124852),l=t.n(a),i=t(171703),c=t(727418),s=t.n(c),u=t(227361),f=t.n(u),p=t(607147),y=t(782904),d=t(22222),g=t(757588),m=t(807472),b=t(743129),h=t(441609),v=t.n(h);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},O.apply(this,arguments)}function E(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw o}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return j(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var w=(0,t(993451).Z)(["placeholder","clearValueText","noResultsText"])(b.ZP),P=function(e){var r=e.responses,t=e.index,n=e.setIndex,o=E((0,a.useState)([]),2),i=o[0],c=o[1],s=E((0,a.useState)(""),2),u=s[0],f=s[1];return(0,a.useEffect)((function(){v()(r)||c(r.map((function(e,r){var t=(null==e?void 0:e.title)||(null==e?void 0:e.name);return{label:t,value:t,idx:r,style:{display:"block"}}})))}),[r]),(0,a.useEffect)((function(){var e,n;f((null===(e=r[t])||void 0===e?void 0:e.title)||(null===(n=r[t])||void 0===n?void 0:n.name)||"")}),[r,t]),l().createElement("div",{id:"identify-layer-select",style:{flex:"1 1 0%"}},l().createElement(w,O({},{clearable:!1,isSearchable:!0},{onChange:function(e){var r=(null==e?void 0:e.idx)||0;n(r)},value:u||"",options:i,noResultsText:"identifyLayerSelectNoResult"})))};P.defaultProps={responses:[],index:-1},P.propTypes={responses:o().array,setIndex:o().func,index:o().number};const S=P;var L=t(675110),x=t(805346),C="MERGELYR:SET_LAYER_1",I="MERGELYR:SET_LAYER_2",R="MERGELYR:DO_MERGE",A="MERGELYR:SET_LOADING",N="MERGELYR:ADD_AS_LAYER",k="MERGELYR:FETCH_FAILURE",_="TOGGLE_CONTROL",D=function(e){return{type:C,index1:e}},T=function(e){return{type:I,index2:e}},M=function(e){return{type:A,isLoading:e}},G=function(e){return{type:k,error:e}},Z={layerIndex1:-1,layerIndex2:-1,loading:!1,error:""},F=t(375875),Y=t.n(F),B=t(49977),W=t.n(B),$=t(423570),q=t.n($),U=t(47805),H=t(580416);function J(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return z(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?z(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Q=function(e){return new Promise((function(r,t){var n={service:"WFS",version:e.version,request:"GetFeature",typeName:e.name,outputFormat:"application/json"};if(e.layerFilter){var o=(0,U.toCQLFilter)(null==e?void 0:e.layerFilter);n.cql_filter=o}r(Y().get("".concat(e.url||"/geoserver/wfs"),{params:n})),t((function(e){e(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.errorFetch"})))}))}))},V=function(e,r){for(var t=[["point","point"],["linestring","linestring"],["polygon","polygon"],["multipoint","multipoint"],["multilinestring","multilinestring"],["multipolygon","multipolygon"],["point","multipoint"],["multipoint","point"],["multilinestring","linestring"],["linestring","multilinestring"],["multipolygon","polygon"],["polygon","multipolygon"]],n=0;n<t.length;n++)if(t[n][0]===(null==e?void 0:e.toLowerCase())&&t[n][1]===(null==r?void 0:r.toLowerCase()))return!0;return!1},X=function(e){for(var r=JSON.parse(JSON.stringify(e)),t=[],n=0;n<r.features.length;n++)for(var o=0;o<r.features[n].features.length;o++)t.push(r.features[n].features[o]);return t.forEach((function(e){return delete e.style})),t},K="",ee="",re=function(e,r){return K=(null==e?void 0:e.title)||(null==e?void 0:e.name)||void 0,ee=(null==r?void 0:r.title)||(null==r?void 0:r.name)||void 0,e&&r?K===ee?function(e){e(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.sameLayers"})))}:function(t){var n=function(e,r,n){if(e){for(var o=0;o<r.length;o++)for(var a=0;a<n.length;a++)if(r[o].id===n[a].id)return t(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.haveLayerAlready"}))),void t(M(!1));var i={type:"FeatureCollection",features:[].concat(J(r),J(n))};t({type:N,featureCollection:i}),t(G("succeed")),t(D(-1)),t(T(-1)),t(M(!1))}else t(G("'".concat(r[0].geometry.type,"' - '").concat(n[0].geometry.type,"' type can't be merged"))),t(M(!1))};if(t(M(!0)),t(G("")),e.features&&r.features){var o=e.features,a=r.features;"Annotations"===K&&(o=X(e)),"Annotations"===ee&&(a=X(r)),n(V(o[0].geometry.type,a[0].geometry.type),o,a)}else if(!e.features&&r.features)Q(e).then((function(e){var t=e.data.features,o=r.features;"Annotations"===ee&&(o=X(r)),n(V(t[0].geometry.type,o[0].geometry.type),t,o)})).catch((function(e){console.error(e),t(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.errorGetFeature1"}))),t(M(!1))}));else if(e.features&&!r.features)Q(r).then((function(r){var t=e.features,o=r.data.features;"Annotations"===K&&(t=X(e)),n(V(t[0].geometry.type,o[0].geometry.type),t,o)})).catch((function(e){console.error(e),t(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.errorGetFeature2"}))),t(M(!1))}));else{var i=Q(e),c=Q(r);Promise.all([i,c]).then((function(e){var r=e[0].data.features,t=e[1].data.features;n(V(r[0].geometry.type,t[0].geometry.type),r,t)})).catch((function(e){console.error(e),t(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.errorAllGetFeature"}))),t(M(!1))}))}}:function(e){e(G(l().createElement(x.Z,{msgId:"mergeLayerPlugin.noBothLayers"})))}};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function oe(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ne(Object(t),!0).forEach((function(r){fe(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ae(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function le(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,r){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},ie(e,r)}function ce(e,r){if(r&&("object"===te(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function fe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pe(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}(0,p.Yq)("mergelyr");var ye=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&ie(e,r)}(i,e);var r,t,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=ue(n);if(o){var t=ue(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return ce(this,e)});function i(){var e;ae(this,i);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return fe(se(e=a.call.apply(a,[this].concat(t))),"dialogStyle",{position:"fixed",top:"0px",left:"0px",width:"500px"}),fe(se(e),"start",{x:.5*(window.innerWidth-600),y:.5*(window.innerHeight-100)}),fe(se(e),"onClose",(function(){e.props.onClose(!1)})),fe(se(e),"onChangeLayer1",(function(r){e.props.onChangeLayer1(r)})),fe(se(e),"onChangeLayer2",(function(r){e.props.onChangeLayer2(r)})),fe(se(e),"onDoMerge",(function(){e.props.onDoMerge(e.props.layersNode[e.props.layerIndex1],e.props.layersNode[e.props.layerIndex2])})),fe(se(e),"onReset",(function(){e.props.onChangeLayer1(-1),e.props.onChangeLayer2(-1)})),e}return r=i,(t=[{key:"render",value:function(){return this.props.show?l().createElement(m.Z,{Dialog:!0,id:"measure-dialog",style:null==this?void 0:this.dialogStyle,start:null==this?void 0:this.start},l().createElement("div",{key:"header",role:"header"},l().createElement(g.Glyphicon,{glyph:"folder-open"})," ",l().createElement(x.Z,{msgId:"mergeLayerPlugin.title"}),l().createElement("button",{key:"close",onClick:this.onClose,className:"close"},l().createElement(g.Glyphicon,{glyph:"1-close"}))),l().createElement("div",{key:"body",role:"body"},l().createElement("p",null,l().createElement(x.Z,{msgId:"mergeLayerPlugin.layerLabel1"})),l().createElement(S,{responses:this.props.layersNode,index:this.props.layerIndex1,setIndex:this.onChangeLayer1}),l().createElement("br",null),l().createElement("p",null,l().createElement(x.Z,{msgId:"mergeLayerPlugin.layerLabel2"})),l().createElement(S,{responses:this.props.layersNode,index:this.props.layerIndex2,setIndex:this.onChangeLayer2}),l().createElement("br",null),l().createElement("div",{style:{display:"flex"}},this.props.loading?l().createElement("button",{key:"mergelayer-merge",className:"btn btn-outline-info",style:{minWidth:"100px"},disabled:!0},l().createElement(x.Z,{msgId:"mergeLayerPlugin.loading"})):l().createElement("button",{key:"mergelayer-merge",className:"btn btn-outline-info",style:{minWidth:"100px"},onClick:this.onDoMerge},l().createElement(x.Z,{msgId:"mergeLayerPlugin.button"})),l().createElement("button",{key:"clear-mergelayer",className:"btn btn-outline",style:{minWidth:"90px",marginRight:"5px"},onClick:this.onReset},l().createElement(x.Z,{msgId:"mergeLayerPlugin.resetButton"}))),l().createElement("br",null),"succeed"===this.props.error?l().createElement("span",{style:{color:"green"}},l().createElement(x.Z,{msgId:"mergeLayerPlugin.successText"})):l().createElement("span",{style:{color:"red"}},this.props.error))):null}}])&&le(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),i}(l().Component);fe(ye,"propTypes",{show:o().bool,layersNode:o().array,layersGroups:o().array,layerIndex1:o().number,layerIndex2:o().number,loading:o().bool,error:o().string,onDoMerge:o().func,onChangeLayer1:o().func,onChangeLayer2:o().func,onReset:o().func}),fe(ye,"defaultProps",{show:!1,layersNode:[],layersGroups:[],layerIndex1:-1,layerIndex2:-1,loading:!1,error:"",onDoMerge:function(){},onChangeLayer1:function(){},onChangeLayer2:function(){},onReset:function(){}});var de=(0,i.connect)((0,d.P1)([function(e){return{layerIndex1:e.mergelyr.layerIndex1,layerIndex2:e.mergelyr.layerIndex2,loading:e.mergelyr.loading,error:e.mergelyr.error,mergedLayer:e.mergelyr.mergedLayer}},function(e){return function(e){return f()(e,"controls.mergelyr.enabled")}(e)},L.Bt,L.l2],(function(e,r,t,n){return oe(oe({},e),{},{show:r,layersGroups:t,layersNode:(o=t,a=[],o.map((function(e){var r;a.push.apply(a,function(e){if(Array.isArray(e))return pe(e)}(r=e.nodes)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,r){if(e){if("string"==typeof e)return pe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?pe(e,r):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})),a),allLayers:n});var o,a})),{onClose:function(){return{type:_,control:"mergelyr",property:null,layerSelected1:{},layerSelected2:{},layerIndex1:-1,layerIndex2:-1,loading:!1,error:""}},onChangeLayer1:D,onChangeLayer2:T,onDoMerge:function(e,r){return{type:R,layerSelected1:e,layerSelected2:r}}},null,{pure:!1})(ye);const ge={MergeLayerPlugin:s()(de,{BurgerMenu:{name:"mergelyr",position:12,panel:!1,help:"help",tooltip:"tooltip",text:"Merge",icon:l().createElement(g.Glyphicon,{glyph:"plus"}),action:function(){return(0,y.Xg)("mergelyr","enabled",!0)}}}),reducers:{mergelyr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case C:return s()({},e,{layerIndex1:r.index1});case I:return s()({},e,{layerIndex2:r.index2});case A:return s()({},e,{loading:r.isLoading});case k:return s()({},e,{error:r.error});case _:return s()({},e,{layerSelected1:r.layerSelected1,layerSelected2:r.layerSelected2,layerIndex1:r.layerIndex1,layerIndex2:r.layerIndex1,loading:r.loading,error:r.error});default:return e}}},epics:{doMergeEpic:function(e,r){var t=r.getState,n=void 0===t?function(){}:t;return e.ofType(R).filter((function(){return(n().controls.mergelyr||{}).enabled||!1})).switchMap((function(e){var r=e.layerSelected1,t=e.layerSelected2;return W().Observable.from([re(r,t)])}))},mergeAsLayerEpic:function(e){return e.ofType(N).switchMap((function(e){var r=e.featureCollection;return W().Observable.of((0,H.A4)({type:"vector",id:q()(),name:"MergeLayer",hideLoading:!0,features:J(r.features),visibility:!0,title:"Merged_("+K+"&"+ee+")"}))}))}}}}}]);
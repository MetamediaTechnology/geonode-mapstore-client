(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[88271],{771335:(e,r,t)=>{"use strict";t.d(r,{Z:()=>w});var n=t(124852),o=t.n(n),i=t(675263),a=t.n(i),u=t(805346),p=t(913718),l=t(314068);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function f(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,r){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},m(e,r)}function b(e,r){if(r&&("object"===c(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var v={FORMAT:o().createElement(u.Z,{msgId:"map.errorFormat"}),SIZE:o().createElement(u.Z,{msgId:"map.errorSize"})},g=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&m(e,r)}(c,e);var r,t,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(n);if(i){var t=h(this).constructor;e=Reflect.construct(r,arguments,t)}else e=r.apply(this,arguments);return b(this,e)});function c(){var e;s(this,c);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return d(y(e=a.call.apply(a,[this].concat(t))),"state",{}),d(y(e),"getThumbnailUrl",(function(){return e.props.map&&e.props.map.newThumbnail&&"NODATA"!==e.props.map.newThumbnail?decodeURIComponent(e.props.map.newThumbnail):null})),d(y(e),"getDataUri",(function(e,r){var t=e;if(t&&t.length>0){var n=t[0],o=new FileReader;return o.onload=function(e){return r(e.target.result,n.size)},o.readAsDataURL(n)}return r(null)})),d(y(e),"getThumbnailDataUri",(function(r){e.getDataUri(e.files,r)})),d(y(e),"generateUUID",(function(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===r?t:3&t|8).toString(16)}))})),d(y(e),"processUpdateThumbnail",(function(r,t,n){var o=e.generateUUID(),i="THUMBNAIL";!e.props.map||n||!e.props.map.thumbnail||e.refs.imgThumbnail||t||e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!0),e.props.map&&!n&&e.props.map.newThumbnail&&!e.refs.imgThumbnail&&t&&(e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(r,t,o,n,i,e.props.map.id)),e.props.map.newThumbnail&&n&&e.refs.imgThumbnail&&(e.deleteThumbnail(e.props.map.thumbnail,null,!1),e.props.onSaveAll(r,t,o,n,i,e.props.map.id)),e.props.map.newThumbnail&&!n&&e.refs.imgThumbnail&&e.props.onSaveAll(r,t,o,n,i,e.props.map.id),e.props.map.newThumbnail||n||e.refs.imgThumbnail||(e.props.map.thumbnail&&t&&e.deleteThumbnail(e.props.map.thumbnail,e.props.map.id,!1),e.props.onSaveAll(r,t,o,n,i,e.props.map.id))})),d(y(e),"updateThumbnail",(function(r,t){e.props.map.errors&&e.props.map.errors.length||e.getDataUri(e.files,(function(n){return e.processUpdateThumbnail(r,t,n),n}))})),d(y(e),"deleteThumbnail",(function(r,t){if(r&&-1!==r.indexOf("geostore")){var n=(0,p.C)(r);n&&e.props.onDeleteThumbnail(n,t)}})),e}return r=c,(t=[{key:"renderThumbnailErrors",value:function(){return this.props.thumbnailErrors&&this.props.thumbnailErrors.length>0?o().createElement("div",{className:"dropzone-errorBox alert-danger"},o().createElement("p",null,o().createElement(u.Z,{msgId:"map.error"})),this.props.thumbnailErrors.map((function(e){return o().createElement("div",{id:"error"+e,key:"error"+e,className:"error"+e},v[e])}))):null}},{key:"render",value:function(){var e=this;return o().createElement(l.Z,{ref:"imgThumbnail",thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.map.saving?"none":"auto"},label:this.props.withLabel&&o().createElement("label",{className:"control-label"},o().createElement(u.Z,{msgId:"map.thumbnail"})),Ã¹:!0,message:o().createElement(o().Fragment,null,this.props.message,o().createElement("br",null),this.props.suggestion),error:this.renderThumbnailErrors(),onUpdate:function(r,t){var n;e.props.onError([],e.props.map.id),e.files=t,e.props.onUpdate(r,null==t||null===(n=t[0])||void 0===n?void 0:n.preview)},onError:function(r,t){e.props.onError(r,e.props.map.id),e.files=t,e.props.onUpdate(null,null)},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemoveThumbnail(),e.props.onError([],e.props.map.id)}})}}])&&f(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),c}(o().Component);d(g,"propTypes",{glyphiconRemove:a().string,style:a().object,thumbnailErrors:a().array,loading:a().bool,withLabel:a().bool,map:a().object,maxFileSize:a().number,onDrop:a().func,onError:a().func,onUpdate:a().func,onSaveAll:a().func,onCreateThumbnail:a().func,onDeleteThumbnail:a().func,onRemoveThumbnail:a().func,message:a().oneOfType([a().string,a().element]),suggestion:a().oneOfType([a().string,a().element])}),d(g,"contextTypes",{messages:a().object}),d(g,"defaultProps",{loading:!1,withLabel:!0,glyphiconRemove:"remove-circle",maxFileSize:5e5,onDrop:function(){},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemoveThumbnail:function(){},onCreateThumbnail:function(){},onDeleteThumbnail:function(){},message:o().createElement(u.Z,{msgId:"map.message"}),suggestion:o().createElement(u.Z,{msgId:"map.suggestion"}),map:{},thumbnailErrors:[]});const w=g},680833:(e,r,t)=>{"use strict";t.d(r,{kB:()=>h,HI:()=>d});var n=t(472500),o=t.n(n),i=(t(91175),t(490173)),a=t(49977),u=t(501157),p=t(375875),l=t.n(p),c=(t(986267),t(624262)),s=t(510284),f=t(233044);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach((function(r){y(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}i.default;var h=function(e){return a.Observable.defer((function(){return u.ZP.getCapabilities((0,c.Fh)(e))})).let(s.oB).map((function(r){return u.ZP.parseLayerCapabilities(r,e)}))},d=function(e){return function(e){return a.Observable.defer((function(){return l().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.name,t=e.search,n=void 0===t?{}:t,i=e.url,a=o().parse(n.url||i,!0);return o().format(b(b({},a),{},{search:void 0,query:b(b({},a.query),{},{service:"WMS",version:"1.1.1",layers:r,outputFormat:"application/json",request:"DescribeLayer"})}))}(e))})).let(s.oB)}(e).map((function(e){var r=e.data,t=void 0===r?{}:r;return t&&t.layerDescriptions[0]})).map((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.owsURL;return b(b({},e),{},{params:{},search:t?{type:"wfs",url:(0,f.cleanAuthParamsFromURL)(t)}:void 0})}))}},510284:(e,r,t)=>{"use strict";t.d(r,{sw:()=>d,oB:()=>v});var n=t(49977),o=t.n(n),i=t(227361),a=t.n(i),u=t(505055),p=t(507526);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,r){if(r&&("object"===l(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){var r="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return f(e,arguments,y(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},s(e)}function f(e,r,t){return f=m()?Reflect.construct.bind():function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&b(o,t.prototype),o},f.apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,r){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},b(e,r)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}t(324384);var h=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&b(e,r)}(i,e);var r,t,n,o=(r=i,t=m(),function(){var e,n=y(r);if(t){var o=y(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return c(this,e)});function i(e,r){var t;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).name="OGCError",t.code=r,t}return n=i,Object.defineProperty(n,"prototype",{writable:!1}),n}(s(Error)),d=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[p.stripPrefix],explicitArray:!1,mergeAttrs:!0};return o().Observable.bindNodeCallback((function(e,t){return(0,u.parseString)(e,r,t)}))(e)},v=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?o().Observable.bindNodeCallback((function(e,r){return(0,u.parseString)(e,{tagNameProcessors:[p.stripPrefix],explicitArray:!1,mergeAttrs:!0},r)}))(e.data).map((function(e){var r=a()(e,"ExceptionReport.Exception.ExceptionText");throw new h(r||"Undefined OGC Service Error",a()(e,"ExceptionReport.Exception.exceptionCode"))})):o().Observable.of(e)}))}}}]);
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[20080],{242780:(e,t,n)=>{"use strict";n.d(t,{Xp:()=>a,A1:()=>i,Mf:()=>l,wq:()=>s,CD:()=>c,DX:()=>u,GW:()=>p,c4:()=>f,Ne:()=>y,hv:()=>d,x9:()=>m,Lv:()=>b,mA:()=>h,Ge:()=>g,sL:()=>O,B6:()=>v,vG:()=>E,QY:()=>S,X2:()=>T,dC:()=>N,bO:()=>A,eY:()=>w,bI:()=>P,Rr:()=>j,Np:()=>I,pC:()=>x,cM:()=>C,iO:()=>_,R_:()=>L,zT:()=>R,$l:()=>D,qO:()=>M,eK:()=>k,HN:()=>G,Bm:()=>z,Kz:()=>Z,gT:()=>F,JT:()=>B,CO:()=>U,NV:()=>H,Ns:()=>W,Fz:()=>Y,Nj:()=>V,op:()=>q,GI:()=>X,Cg:()=>$,WD:()=>K,rb:()=>Q,it:()=>J,br:()=>ee,Hf:()=>te,Ps:()=>ne,U7:()=>re,aH:()=>oe,qX:()=>ae,cv:()=>ie,M_:()=>le,QT:()=>se,z_:()=>ce,Y5:()=>ue,wP:()=>pe,pv:()=>fe,bM:()=>ye,Zw:()=>de,Ay:()=>me,aS:()=>be,LR:()=>he,VR:()=>ge,A9:()=>Oe,i9:()=>ve,$f:()=>Ee,F4:()=>Se,r1:()=>Te,Om:()=>Ne,_x:()=>Ae,dT:()=>we,jw:()=>Pe,iY:()=>je,QD:()=>Ie,xD:()=>xe,kg:()=>Ce,ob:()=>_e,nk:()=>Le,A_:()=>Re,nY:()=>De,Bp:()=>Me,CH:()=>ke,Rx:()=>Ge,MQ:()=>ze,l7:()=>Ze,VP:()=>Fe,g:()=>Be,L0:()=>Ue,if:()=>He,tp:()=>We,TA:()=>Ye,yg:()=>Ve,Hl:()=>qe,y$:()=>Xe,ts:()=>$e,UJ:()=>Ke,yw:()=>Qe,nz:()=>Je,RC:()=>et,om:()=>tt,XW:()=>nt,WB:()=>rt,pI:()=>ot,Dd:()=>at,V_:()=>it,TW:()=>lt,$:()=>st,Y_:()=>ct,Ib:()=>ut,_n:()=>pt});var r=n(91175),o=n.n(r),a="ANNOTATIONS:INIT_PLUGIN",i="ANNOTATIONS:EDIT",l="ANNOTATIONS:OPEN_EDITOR",s="ANNOTATIONS:SHOW",c="ANNOTATIONS:NEW",u="ANNOTATIONS:REMOVE",p="ANNOTATIONS:REMOVE_GEOMETRY",f="ANNOTATIONS:CONFIRM_REMOVE",y="ANNOTATIONS:CANCEL_REMOVE",d="ANNOTATIONS:CANCEL_EDIT",m="ANNOTATIONS:CANCEL_SHOW",b="ANNOTATIONS:SAVE",h="ANNOTATIONS:TOGGLE_ADD",g="ANNOTATIONS:TOGGLE_STYLE",O="ANNOTATIONS:SET_STYLE",v="ANNOTATIONS:RESTORE_STYLE",E="ANNOTATIONS:SET_INVALID_SELECTED",S="ANNOTATIONS:VALIDATION_ERROR",T="ANNOTATIONS:HIGHLIGHT",N="ANNOTATIONS:CLEAN_HIGHLIGHT",A="ANNOTATIONS:FILTER",w="ANNOTATIONS:CLOSE",P="ANNOTATIONS:CONFIRM_CLOSE",j="ANNOTATIONS:CANCEL_CLOSE",I="ANNOTATIONS:START_DRAWING",x="ANNOTATIONS:UNSAVED_CHANGES",C="ANNOTATIONS:VISIBILITY",_="ANNOTATIONS:TOGGLE_CHANGES_MODAL",L="ANNOTATIONS:TOGGLE_GEOMETRY_MODAL",R="ANNOTATIONS:CHANGED_PROPERTIES",D="ANNOTATIONS:UNSAVED_STYLE",M="ANNOTATIONS:TOGGLE_STYLE_MODAL",k="ANNOTATIONS:ADD_TEXT",G="ANNOTATIONS:DOWNLOAD",z="ANNOTATIONS:LOAD_ANNOTATIONS",Z="ANNOTATIONS:CHANGED_SELECTED",F="ANNOTATIONS:RESET_COORD_EDITOR",B="ANNOTATIONS:CHANGE_RADIUS",U="ANNOTATIONS:CHANGE_TEXT",H="ANNOTATIONS:ADD_NEW_FEATURE",W="ANNOTATIONS:SET_EDITING_FEATURE",Y="ANNOTATIONS:HIGHLIGHT_POINT",V="ANNOTATIONS:TOGGLE_DELETE_FT_MODAL",q="ANNOTATIONS:CONFIRM_DELETE_FEATURE",X="ANNOTATIONS:CHANGE_FORMAT",$="ANNOTATIONS:UPDATE_SYMBOLS",K="ANNOTATIONS:ERROR_SYMBOLS",Q="ANNOTATIONS:SET_DEFAULT_STYLE",J="ANNOTATIONS:LOAD_DEFAULT_STYLES",ee="ANNOTATIONS:LOADING",te="ANNOTATIONS:CHANGE_GEOMETRY_TITLE",ne="ANNOTATIONS:FILTER_MARKER",re="ANNOTATIONS:HIDE_MEASURE_WARNING",oe="ANNOTATIONS:TOGGLE_SHOW_AGAIN",ae="ANNOTATIONS:GEOMETRY_HIGHLIGHT",ie="ANNOTATIONS:UNSELECT_FEATURE",le="ANNOTATIONS:VALIDATE_FEATURE",se=function(){return{type:a}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:$,symbols:e}},ue=function(e){return{type:K,symbolErrors:e}},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:z,features:e,override:t}},fe=function(){return{type:q}},ye=function(e){return{type:l,id:e}},de=function(e){return{type:X,format:e}},me=function(){return{type:V}},be=function(e){return{type:Y,point:e}},he=function(e){return{type:G,annotation:e}},ge=function(e){return function(t,n){var r=o()(o()(n().layers.flat.filter((function(e){return"annotations"===e.id}))).features.filter((function(t){return t.properties.id===e})));"FeatureCollection"===r.type?t({type:i,feature:r,featureType:r.type}):t({type:i,feature:r,featureType:r.geometry.type})}},Oe=function(){return{type:c}},ve=function(e,t,n,r){return{type:Z,coordinates:e,radius:t,text:n,crs:r}},Ee=function(e,t){return{type:E,errorFrom:e,coordinates:t}},Se=function(){return{type:k}},Te=function(e,t){return{type:C,id:e,visibility:t}},Ne=function(e,t){return{type:R,field:e,value:t}},Ae=function(e){return{type:u,id:e}},we=function(e){return{type:p,id:e}},Pe=function(e,t){return{type:f,id:e,attribute:t}},je=function(){return{type:y}},Ie=function(e){return{type:d,properties:e}},xe=function(e,t,n,r,o,a){return{type:b,id:e,fields:t,geometry:n,style:r,newFeature:o,properties:a}},Ce=function(e){return{type:h,featureType:e}},_e=function(e){return{type:g,styling:e}},Le=function(){return{type:v}},Re=function(e){return{type:O,style:e}},De=function(e,t,n){return{type:"ANNOTATIONS:UPDATE_GEOMETRY",geometry:e,textChanged:t,circleChanged:n}},Me=function(e){return{type:S,errors:e}},ke=function(e){return{type:T,id:e}},Ge=function(){return{type:N}},ze=function(e){return{type:s,id:e}},Ze=function(){return{type:m}},Fe=function(e){return{type:A,filter:e}},Be=function(){return{type:w}},Ue=function(e){return{type:P,properties:e}},He=function(e){return{type:x,unsavedChanges:e}},We=function(e){return{type:D,unsavedStyle:e}},Ye=function(){return{type:H}},Ve=function(e){return{type:W,feature:e}},qe=function(){return{type:j}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:I,options:e}},$e=function(){return{type:_}},Ke=function(){return{type:L}},Qe=function(){return{type:M}},Je=function(){return{type:F}},et=function(){return{type:ie}},tt=function(e,t,n){return{type:B,radius:e,components:t,crs:n}},nt=function(e,t){return{type:U,text:e,components:t}},rt=function(e,t){return{type:Q,path:e,style:t}},ot=function(e,t,n,r,o){return{type:J,shape:e,size:t,fillColor:n,strokeColor:r,symbolsPath:o}},at=function(e){return{type:te,title:e}},it=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:ee,name:t,value:e}},lt=function(e){return{type:ne,filter:e}},st=function(e,t){return{type:ae,id:e,state:t}},ct=function(){return{type:re}},ut=function(){return{type:oe}},pt=function(){return{type:le}}},12440:(e,t,n)=>{"use strict";n.d(t,{p5:()=>r,aW:()=>o,kn:()=>a,br:()=>i,aE:()=>l,vm:()=>s,H4:()=>c,_p:()=>u,_H:()=>p,j7:()=>f,wg:()=>y,qQ:()=>d,K4:()=>m,_W:()=>b,Jd:()=>h,wD:()=>g,bM:()=>O,yW:()=>v});var r="IMPORT::SET_LAYERS",o="IMPORT::ON_ERROR",a="IMPORT::ON_SELECT_LAYER",i="IMPORT::LOADING",l="IMPORT::ON_LAYER_ADDED",s="IMPORT::UPDATE_BBOX",c="IMPORT::ON_SUCCESS",u="ON_SHAPE_ERROR",p="IMPORT::ON_LAYER_SKIPPED";function f(e,t){return{type:r,layers:e,errors:t}}function y(e){return{type:a,layer:e}}function d(e){return{type:o,error:e}}function m(e){return{type:i,status:e}}function b(e){return{type:l,layer:e}}function h(e){return{type:s,bbox:e}}function g(e){return{type:c,message:e}}function O(e){return{type:u,message:e}}function v(e){return{type:p,layer:e}}},442416:(e,t,n)=>{"use strict";n.d(t,{H:()=>r,q:()=>o});var r="SET_STYLE_PARAMETER";function o(e,t){return{type:r,name:e,value:t}}},615402:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(675263),o=n.n(r),a=n(124852),i=n.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=n(868195).FormattedHTMLMessage,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function l(){return s(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return this.context.intl?i().createElement(d,{id:this.props.msgId,values:this.props.msgParams}):i().createElement("span",null,this.props.msgId||"")}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);y(m,"propTypes",{msgId:o().string.isRequired,msgParams:o().object}),y(m,"contextTypes",{intl:o().object});const b=m},807472:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var r=n(727418),o=n.n(r),a=n(675263),i=n.n(a),l=n(124852),s=n.n(l),c=n(485294),u=n.n(c),p=n(472986),f=n.n(p),y=n(805346);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(l,e);var t,n,r,a,i=(r=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(a){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function l(){var e;h(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(E(e=i.call.apply(i,[this].concat(n))),"renderLoading",(function(){return e.props.maskLoading?s().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},s().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},s().createElement(y.Z,{msgId:"loading"}),s().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),T(E(e),"renderRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),T(E(e),"hasRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),T(E(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(n=[{key:"render",value:function(){var e=this,t=s().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},s().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),s().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?s().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):s().createElement("span",null)),n=this.props.draggable?s().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,r=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?s().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:r,className:"fade in modal "+this.props.containerClassName,role:"dialog"},n):n}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(s().Component);T(N,"propTypes",{id:i().string.isRequired,style:i().object,backgroundStyle:i().object,className:i().string,maskLoading:i().bool,containerClassName:i().string,headerClassName:i().string,bodyClassName:i().string,footerClassName:i().string,onClickOut:i().func,modal:i().bool,start:i().object,draggable:i().bool,bounds:i().oneOfType([i().string,i().object])}),T(N,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const A=N},532425:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(675263),o=n.n(r),a=n(124852),i=n.n(a);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,a=e.hidden;return i().createElement("div",{className:o,style:s({width:t,height:t,overflow:"hidden"},r)},!a&&i().createElement("div",{className:"mapstore-".concat(u(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const f=p},61018:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),a=n(807472),i=n(757588),l=["show","style","modal","draggable","closeGlyph","closable","onClose","title","header","footer","children"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f=function(e){var t=e.show,n=e.style,r=void 0===n?{}:n,c=e.modal,p=e.draggable,f=void 0!==p&&p,y=e.closeGlyph,d=void 0===y?"1-close":y,m=e.closable,b=void 0===m||m,h=e.onClose,g=void 0===h?function(){}:h,O=e.title,v=e.header,E=e.footer,S=e.children,T=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return t?o().createElement(a.Z,s({modal:c,onClickOut:b&&c?function(){return g()}:null,style:u(u({},r),{},{display:t?"block":"none"}),draggable:f},T),o().createElement("span",{role:"header"},O||v||o().createElement("span",null,"Â "),b?o().createElement("button",{onClick:function(){return g()},className:"settings-panel-close close"},o().createElement(i.Glyphicon,{glyph:d})):null),o().createElement("span",{role:"body"},S),E?o().createElement("span",{role:"footer"},E):null):null}},420080:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(124852),o=n.n(r),a=n(171703),i=n(481756),l=n(12440),s=n(197395),c=n(801550),u=n(580416),p=n(242780),f=n(673781),y=n(782904),d=n(727418),m=n.n(d),b=n(757588),h=n(93152);const g={MapImportPlugin:m()({loadPlugin:function(e){Promise.resolve().then(function(){var t=n(837075).default,r=(0,a.connect)((function(e){return{enabled:e.controls&&e.controls.mapimport&&e.controls.mapimport.enabled,layers:e.mapimport&&e.mapimport.layers||null,selected:e.mapimport&&e.mapimport.selected||null,bbox:e.mapimport&&e.mapimport.bbox||null,success:e.mapimport&&e.mapimport.success||null,errors:e.mapimport&&e.mapimport.errors||null,shapeStyle:e.style||{},mapType:(0,h.$v)(e),annotationsLayer:(0,f.sB)(e)}}),{setLayers:l.j7,onLayerAdded:l._W,onLayerSkipped:l.yW,onSelectLayer:l.wg,onError:l.qQ,onSuccess:l.wD,addLayer:u.A4,loadAnnotations:p.wP,onZoomSelected:c.Px,updateBBox:l.Jd,setLoading:l.K4,onClose:y.Xi.bind(null,"mapimport",null),warning:s.Kp})(t);e(r)}.bind(null,n)).catch(n.oe)},enabler:function(e){return e.mapimport&&e.mapimport.enabled||e.toolbar&&"import"===e.toolbar.active}},{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"import",position:4,text:o().createElement(i.Z,{msgId:"mapImport.title"}),tooltip:"mapImport.tooltip",icon:o().createElement(b.Glyphicon,{glyph:"upload"}),action:y.Xi.bind(null,"mapimport",null),priority:2,doNotHide:!0}}),reducers:{mapimport:n(183807).Z,style:n(318323).Z}}},837075:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ut});var r=n(867076),o=n(22222),a=n(124852),i=n.n(a),l=n(855033),s=n.n(l),c=n(757588),u=n(282467),p=(0,n(815135).Z)(u.Z);const f=function(e){var t=e.accept,n=e.children,r=e.onRef,o=void 0===r?function(){}:r,a=e.onClose,l=void 0===a?function(){}:a,u=e.onDrop,f=void 0===u?function(){}:u,y=e.onDragEnter,d=void 0===y?function(){}:y,m=e.onDragLeave,b=void 0===m?function(){}:m;return i().createElement(s(),{disableClick:!0,ref:o,id:"DRAGDROP_IMPORT_ZONE",style:{position:"relative",height:"100%"},accept:t,onDrop:f,onDragEnter:d,onDragLeave:b},i().createElement("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,background:"rgba(0,0,0,0.75)",color:"#fff",zIndex:2e3,display:"flex",textAlign:"center"}},i().createElement(p,{style:{border:"none",background:"transparent",color:"white",fontSize:35,top:0,right:0,position:"absolute"},onClick:function(){return l()}},i().createElement(c.Glyphicon,{glyph:"1-close"})),i().createElement("div",{style:{margin:"auto",maxWidth:550}},n)))};var y=n(532425),d=n(805346),m=n(615402);const b=function(e){var t=e.openFileDialog;return i().createElement("div",null,i().createElement(m.Z,{msgId:"mapImport.dropZone.heading"}),t?i().createElement(u.Z,{bsStyle:"primary",onClick:t},i().createElement(d.Z,{msgId:"mapImport.dropZone.selectFiles"})):null,i().createElement("br",null),i().createElement("br",null),i().createElement(m.Z,{msgId:"mapImport.dropZone.infoSupported"}),i().createElement("hr",null),i().createElement(m.Z,{msgId:"mapImport.dropZone.note"}))};var h=["error"];var g={FILE_NOT_SUPPORTED:i().createElement(d.Z,{msgId:"mapImport.errors.fileNotSupported"}),PROJECTION_NOT_SUPPORTED:i().createElement(d.Z,{msgId:"mapImport.errors.projectionNotSupported"})};const O=(0,r.compose)((0,r.branch)((function(e){return e.loading}),(0,r.renderComponent)((function(){return i().createElement("div",{style:{margin:"auto",maxWidth:550}},i().createElement(y.Z,{size:80,color:"#ffffff",style:{margin:"auto"}}),i().createElement("h4",null,i().createElement(d.Z,{msgId:"loading"})))}))),(0,r.branch)((function(e){return e.error}),(0,r.renderComponent)((function(e){var t=e.error,n=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h);return i().createElement("div",{style:{margin:"auto",maxWidth:550}},i().createElement("div",null,i().createElement(c.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:80}})),i().createElement("h5",null,function(e){return e?g[e.message]||g[e]||i().createElement("span",null,i().createElement(d.Z,{msgId:"mapImport.errors.unknownError"}),":",i().createElement(c.Alert,{bsStyle:"warning"},e.message)):i().createElement(d.Z,{msgId:"mapImport.errors.unknownError"})}(t)),i().createElement(b,n))}))))((function(e){return i().createElement("div",null,i().createElement("div",null,i().createElement(c.Glyphicon,{glyph:"upload",style:{fontSize:80}})),i().createElement(b,e))}));var v=n(966085),E=n.n(v),S=n(500711),T=n.n(S),N=n(227361),A=n.n(N),w=n(359704),P=n.n(w),j=n(49977),I=n.n(j),x=n(658767),C=n(737275),_=n(989077),L=n(624262);function R(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){return new Promise((function(t,n){var r=(0,_.jU)(e.name),o=e.type||_.Yf[r];"application/x-zip-compressed"===o||"application/zip"===o||"application/vnd.google-earth.kml+xml"===o||"application/vnd.google-earth.kmz"===o||"application/gpx+xml"===o||"application/json"===o||"application/vnd.wmc"===o?t(e):function(e){return(0,_.xp)(e).then((function(e){return(new(E())).loadAsync(e)}))}(e).then((function(){return t(e)})).catch((function(){return n(new Error("FILE_NOT_SUPPORTED"))}))}))};const Z=(0,r.compose)((0,r.mapPropsStream)((function(e){var t=(0,r.createEventHandler)(),n=t.handler,o=t.stream,a=(0,r.createEventHandler)(),i=a.handler,l=a.stream;return e.combineLatest(o.switchMap((function(e){return I().Observable.from(e).flatMap(z).flatMap(function(e){return function(t){var n=(0,_.jU)(t.name),r=t.type||_.Yf[n],o=C.ZP.getConfigProp("projectionDefs")||[],a=(o.length&&o.map((function(e){return e.code}))||[]).concat(["EPSG:4326","EPSG:3857","EPSG:900913"]);return"application/vnd.google-earth.kml+xml"===r?(0,_.BP)(t).then((function(e){return(0,_.bf)(e)})):"application/gpx+xml"===r?(0,_.BP)(t).then((function(e){return(0,_.cX)(e,t.name)})):"application/vnd.google-earth.kmz"===r?(0,_.N)(t).then((function(e){return(0,_.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,_.xp)(t).then((function(n){return(0,_.Lz)(n).then((function(r){r.length>0&&e({type:"warning",filename:t.name,message:"shapefile.error.missingPrj"});var o=(0,_.mr)(n).map((function(e){return k(k({},e),{},{filename:t.name})}));if(P()(o,(function(e){return!!A()(e,"map.projection")}))){var i=o.filter((function(e){return!!A()(e,"map.projection")}));if(T()(i,(function(e){return a.includes(e.map.projection)})))return o;throw new Error("PROJECTION_NOT_SUPPORTED")}return o}))})):"application/json"===r?(0,_.zr)(t).then((function(e){var n=A()(e,"map.projection");if(n){if(a.includes(n))return[k(k({},e),{},{fileName:t.name})];throw new Error("PROJECTION_NOT_SUPPORTED")}return[k(k({},e),{},{fileName:t.name})]})):"application/vnd.wmc"===r?(0,_.IN)(t).then((function(e){return[k(k({},e),{},{fileName:t.name})]})):null}}(i)).reduce((function(e,t){return{layers:(e.layers||[]).concat(t.filter((function(e){return function(e){return e&&e.features&&0!==e.features.length}(e)})).map((function(e){return(0,x.Ag)(e)?{name:"Annotations",features:(null==e?void 0:e.features)||[],filename:e.filename}:k(k({},(0,L.Rt)(e)),{},{filename:e.filename})}))),maps:(e.maps||[]).concat(t.filter((function(e){return function(e){return e&&e.version&&e.map}(e)})))}}),{}).map((function(e){return{loading:!1,files:e}})).catch((function(e){return I().Observable.of({error:e,loading:!1})})).startWith({loading:!0})})).startWith({}),(function(e,t){return k(k(k({},e),t),{},{onDrop:n})})).combineLatest(l.scan((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(R(e),[t])}),[]).startWith(void 0),(function(e,t){return k(k({},e),{},{warnings:t})}))})));var F=n(986267);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W=(0,r.compose)((0,r.withHandlers)({useFiles:function(e){var t=e.currentMap,n=e.loadMap,r=void 0===n?function(){}:n,o=e.loadMapInfo,a=void 0===o?function(){}:o,i=e.onClose,l=void 0===i?function(){}:i,s=e.setLayers,c=void 0===s?function(){}:s,u=e.annotationsLayer,p=e.loadAnnotations,f=void 0===p?function(){}:p,y=e.warning,d=void 0===y?function(){}:y;return function(e,n){var o=e.layers,i=void 0===o?[]:o,s=e.maps,p=(void 0===s?[]:s)[0];if(p){var y=t.zoom,m=t.center,b=t.mapId,h=p.fileName;r(U(U({},p),{},{map:U(U({},p.map),{},{zoom:p.map.zoom||y,center:p.map.center||m})}),b||null,!p.map.zoom&&(p.map.bbox||{bounds:p.map.maxExtent})),b&&h&&a(b),l()}if(i.length>0){var g=i&&"Annotations"===i[0].name;if(!u&&g)f(i[0].features,!1),l();else{var O=[];i.forEach((function(e){var t;"vector"!==e.type||(0,F.checkIfLayerFitsExtentForProjection)(e)?O.push(e):d({title:"notification.warning",message:"mapImport.errors.fileBeyondBoundaries",autoDismiss:6,position:"tc",values:{filename:null!==(t=e.name)&&void 0!==t?t:" "}})})),c(O,n)}}}}}),(0,r.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("files").filter((function(e){return e.files})).do((function(e){var t=e.files,n=e.useFiles,r=void 0===n?function(){}:n,o=e.warnings;return r(t,void 0===o?[]:o)})).ignoreElements())}))),Y=(0,r.compose)((0,r.withHandlers)((function(){var e=null;return{onRef:function(){return function(t){return e=t}},openFileDialog:function(){return function(){return e.open()}}}})));var V=["onClose","onDrop","onRef"];const q=(0,r.compose)(Z,W,Y)((function(e){var t=e.onClose,n=void 0===t?function(){}:t,r=e.onDrop,o=void 0===r?function(){}:r,a=e.onRef,l=void 0===a?function(){}:a,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,V);return i().createElement(f,{onClose:n,onDrop:o,onRef:l},i().createElement(O,s))}));var X=n(171703),$=n(675263),K=n.n($),Q=n(481756),J=n(12440),ee=n(442416),te=n(747037),ne=n.n(te),re=n(200020),oe=n(86638),ae=n(472986),ie=n.n(ae),le=n(882702);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}function fe(e,t){if(t&&("object"===se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ye(e)}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(r);if(o){var n=de(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fe(this,e)});function l(){var e;ce(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(ye(e=a.call.apply(a,[this].concat(n))),"tryUnzip",(function(e){return(0,_.xp)(e).then((function(e){return(new(E())).loadAsync(e)}))})),me(ye(e),"checkFileType",(function(t){return new le.Promise((function(n,r){var o=(0,_.jU)(t.name),a=t.type||_.Yf[o];"application/x-zip-compressed"===a||"application/zip"===a||"application/vnd.google-earth.kml+xml"===a||"application/vnd.google-earth.kmz"===a||"application/gpx+xml"===a?n():e.tryUnzip(t).then(n).catch(r)}))})),me(ye(e),"checkfile",(function(t){le.Promise.all(t.map((function(t){return e.checkFileType(t)}))).then((function(){e.props.error&&e.props.onShapeError(null),e.props.onShapeChoosen(t)})).catch((function(){var t=(0,oe.S$)(e.context.messages,e.props.errorMessage);e.props.onShapeError(t)}))})),e}return t=l,(n=[{key:"render",value:function(){return this.props.loading?i().createElement("div",{className:"btn btn-info",style:{float:"center"}}," ",i().createElement(ie(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"})):i().createElement(s(),{rejectClassName:"alert-danger",className:"alert alert-info",onDrop:this.checkfile},i().createElement("div",{className:"dropzone-content",style:{textAlign:"center"}},this.props.text))}}])&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);me(be,"propTypes",{text:K().oneOfType([K().string,K().element]),loading:K().bool,onShapeChoosen:K().func,onShapeError:K().func,error:K().oneOfType([K().string,K().element]),errorMessage:K().string}),me(be,"contextTypes",{messages:K().object}),me(be,"defaultProps",{text:"Drop or click to import a local Shape",onShapeChoosen:function(){},onShapeError:function(){},errorMessage:"shapefile.error.select"});const he=be;function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Te(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);if(o){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Te(this,e)});function l(){var e;ve(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(Ne(e=a.call.apply(a,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0}),we(Ne(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),we(Ne(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),we(Ne(e),"renderError",(function(){return i().createElement(c.Row,null,i().createElement("div",{style:{textAlign:"center"},className:"alert alert-danger"},i().createElement(d.Z,{msgId:e.props.error})))})),we(Ne(e),"renderSuccess",(function(){return i().createElement(c.Row,null,i().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),we(Ne(e),"renderStyle",(function(){return e.props.stylers[e.getGeomType(e.props.selected)]})),we(Ne(e),"renderDefaultStyle",(function(){return e.props.selected?i().createElement(c.Row,null,i().createElement(c.Col,{xs:2},i().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.defaultStyle"}))),i().createElement(c.Col,{xs:2},i().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:e.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.zoom"})))):null})),we(Ne(e),"addShape",(function(t){e.props.shapeLoading(!0);var n=e.props.readFiles(t,e.props.onShapeError);le.Promise.all(n).then((function(t){var n=t.filter((function(e){return e[0]&&e[0].features&&0!==e[0].features.length||"Feature"===e[0].type}));n=n.reduce((function(t,n){return n?t.concat(n.map((function(t){return(0,L.Rt)(t,e.props.createId(t,n))}))):t}),[]),e.props.onShapeChoosen(n),e.props.shapeLoading(!1)})).catch((function(t){e.props.shapeLoading(!1);var n=t&&t.name||t||"";ne()(n)&&"SyntaxError"===n?e.props.onShapeError("shapefile.error.shapeFileParsingError"):e.props.onShapeError("shapefile.error.genericLoadError")}))})),we(Ne(e),"addToMap",(function(){e.props.shapeLoading(!0);var t=e.props.selected;le.Promise.resolve(e.props.addShapeLayer(t)).then((function(){e.props.shapeLoading(!1);var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateShapeBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326")),e.props.onShapeSuccess(e.props.layers[0].name+(0,oe.S$)(e.context.messages,"shapefile.success")),e.props.onLayerAdded(e.props.selected)})).catch((function(){e.props.shapeLoading(!1),e.props.onShapeError("shapefile.error.genericLoadError")}))})),e}return t=l,(n=[{key:"render",value:function(){var e=this;return i().createElement(c.Grid,{role:"body",style:{width:"300px"},fluid:!0},this.props.error?this.renderError():null,this.props.success?this.renderSuccess():null,i().createElement(c.Row,{style:{textAlign:"center"}},this.props.selected?i().createElement(re.DropdownList,{data:this.props.layers,value:this.props.selected,onSelect:function(t){return e.props.onSelectLayer(t)},valueField:"id",textField:"name"}):i().createElement(he,Oe({},this.props.uploadOptions,{errorMessage:"shapefile.error.select",text:this.props.uploadMessage,onShapeChoosen:this.addShape,onShapeError:this.props.onShapeError}))),i().createElement(c.Row,{style:{marginBottom:10}},this.state.useDefaultStyle?null:this.renderStyle()),this.renderDefaultStyle(),this.props.selected?i().createElement(c.Row,null,i().createElement(c.Col,{xsOffset:6,xs:3}," ",i().createElement(u.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.onShapeChoosen(null)}},this.props.cancelMessage)),i().createElement(c.Col,{xs:3}," ",i().createElement(u.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},this.props.addMessage))):null)}}])&&Ee(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);we(Pe,"propTypes",{bbox:K().array,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,readFiles:K().func,onShapeError:K().func,onShapeSuccess:K().func,onShapeChoosen:K().func,addShapeLayer:K().func,shapeLoading:K().func,onSelectLayer:K().func,onLayerAdded:K().func,onZoomSelected:K().func,updateShapeBBox:K().func,error:K().string,success:K().string,mapType:K().string,buttonSize:K().string,uploadMessage:K().object,cancelMessage:K().object,addMessage:K().object,stylers:K().object,uploadOptions:K().object,createId:K().func}),we(Pe,"contextTypes",{messages:K().object}),we(Pe,"defaultProps",{shapeLoading:function(){},readFiles:function(e,t){return e.map((function(e){var n=(0,_.jU)(e.name),r=e.type||_.Yf[n];return"application/vnd.google-earth.kml+xml"===r?(0,_.BP)(e).then((function(e){return(0,_.bf)(e)})):"application/gpx+xml"===r?(0,_.BP)(e).then((function(e){return(0,_.cX)(e)})):"application/vnd.google-earth.kmz"===r?(0,_.N)(e).then((function(e){return(0,_.bf)(e)})):"application/x-zip-compressed"===r||"application/zip"===r?(0,_.xp)(e).then((function(e){return(0,_.Lz)(e).then((function(n){return n.length>0&&t("shapefile.error.missingPrj"),(0,_.mr)(e)}))})):null}))},mapType:"leaflet",stylers:{},buttonSize:"small",uploadOptions:{},createId:function(){},bbox:null});const je=Pe;var Ie=n(970674),xe=n(458272),Ce=n(36401),_e=((0,X.connect)((function(e){return{uploadOptions:{error:e.mapimport&&e.mapimport.error||null,loading:e.mapimport&&e.mapimport.loading||!1}}}),{onShapeError:J.bM})(je),(0,X.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ee.q})(xe.Z)),Le=(0,X.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ee.q})(Ie.Z),Re=(0,X.connect)((function(e){return{shapeStyle:e.style||{}}}),{setStyleParameter:ee.q})(Ce.Z),De=n(727418),Me=n.n(De),ke=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a,")")},Ge={r:255,g:0,b:0,a:1},ze=function(e,t){var n=Me()({},e),r=function(e){return e.features&&e.features[0]?e.features[0].geometry&&e.features[0].geometry.type:void 0}(e);!t.marker||"Point"!==r&&"MultiPoint"!==r||(n.styleName="marker",n.handleClickOnLayer=!0);var o=t||{},a=o.color,i=void 0===a?Ge:a,l=o.fill,s=void 0===l?Ge:l;return n.style={weight:t.width,radius:t.radius,opacity:i.a,fillOpacity:s.a,color:ke(i),fillColor:ke(s)},n};function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},He(e,t)}function We(e,t){if(t&&("object"===Ze(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ye(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ve(r);if(o){var n=Ve(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return We(this,e)});function l(){var e;Be(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return qe(Ye(e=a.call.apply(a,[this].concat(n))),"state",{useDefaultStyle:!1,zoomOnShapefiles:!0,overrideAnnotation:!1,initialLayers:[]}),qe(Ye(e),"getGeometryType",(function(e){if(e&&"GeometryCollection"===e.type)return e.geometries.reduce((function(e,t){return t&&t.type===e?e:t.type}),null);if(e)switch(e.type){case"Polygon":case"MultiPolygon":return"Polygon";case"MultiLineString":case"LineString":return"LineString";case"Point":case"MultiPoint":return"Point";default:return null}return null})),qe(Ye(e),"getGeomType",(function(t){return t&&t.features&&t.features[0].geometry?t.features.reduce((function(t,n){var r=e.getGeometryType(n.geometry);return t?r===t?t:"GeometryCollection":r}),null):null})),qe(Ye(e),"renderError",(function(){return e.props.errors&&e.props.errors.filter((function(t){return(t.filename||t.name)&&e.props.layers&&e.props.layers[0]&&(e.props.layers[0].filename===t.filename||e.props.layers[0].name===t.name)})).map((function(e){return i().createElement(c.Row,{key:e&&e.name+e.message},i().createElement(c.Alert,{bsStyle:e.type,style:{textAlign:"center"}},i().createElement(d.Z,{msgId:e.message})))}))})),qe(Ye(e),"renderSuccess",(function(){return i().createElement(c.Row,null,i().createElement("div",{style:{textAlign:"center",overflowWrap:"break-word"},className:"alert alert-success"},e.props.success))})),qe(Ye(e),"renderDisableStyleCustomization",(function(e){return e?i().createElement("div",{className:"alert alert-info mb-2 style-customisation-disabled-container"},i().createElement(d.Z,{msgId:"shapefile.styleCustomizationDisabled"})):null})),qe(Ye(e),"findLayerSerialNumber",(function(t){var n=t.name;return e.state.initialLayers.findIndex((function(e){return e.name===n}))+1})),qe(Ye(e),"addToMap",(function(){var t=e.props.selected;e.state.useDefaultStyle||(t=ze(t,e.props.shapeStyle));var n=(0,x.Ag)(t);le.Promise.resolve(n?e.props.loadAnnotations(t.features,e.state.overrideAnnotation):e.props.addLayer(t)).then((function(){if(!n){var t=[];e.props.layers[0].bbox&&e.props.bbox&&(t=[Math.min(e.props.bbox[0],e.props.layers[0].bbox.bounds.minx),Math.min(e.props.bbox[1],e.props.layers[0].bbox.bounds.miny),Math.max(e.props.bbox[2],e.props.layers[0].bbox.bounds.maxx),Math.max(e.props.bbox[3],e.props.layers[0].bbox.bounds.maxy)]),e.state.zoomOnShapefiles&&(e.props.updateBBox(t&&t.length?t:e.props.bbox),e.props.onZoomSelected(t&&t.length?t:e.props.bbox,"EPSG:4326"))}e.props.onSuccess(e.props.layers.length>1?n?"Annotation":e.props.layers[0].name+(0,oe.S$)(e.context.messages,"shapefile.success"):void 0),e.props.onLayerAdded(e.props.selected)})).catch((function(t){e.props.onError({type:"error",name:n?"Annotation":e.props.layers[0].name,error:t,message:"shapefile.error.genericLoadError"})}))})),qe(Ye(e),"annotationOptions",(function(){return i().createElement(i().Fragment,null,i().createElement(c.Col,{xs:2},i().createElement("input",{type:"radio",checked:!e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!1})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.merge"}))),i().createElement(c.Col,{xs:2},i().createElement("input",{type:"radio",checked:e.state.overrideAnnotation,onChange:function(){e.setState({overrideAnnotation:!0})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.replace"}))))})),e}return t=l,n=[{key:"componentDidMount",value:function(){var e;this.setState({initialLayers:(e=this.props.layers,function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})}},{key:"render",value:function(){var e=this,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!e||!e.features.length)&&e.features.reduce((function(e,t){var n=t.style&&Array.isArray(t.style)&&t.style.length||Object.keys(t.style||{}).length;return e||!!n}),!1)}(this.props.selected);return i().createElement(c.Grid,{role:"body",style:{width:"400px"},fluid:!0},this.props.errors?this.renderError():null,this.props.success?this.renderSuccess():null,i().createElement(c.Row,null,i().createElement("h4",null,i().createElement("span",{style:{fontWeight:"bold"}},i().createElement(d.Z,{msgId:"shapefile.layerOf",msgParams:{count:this.findLayerSerialNumber(this.props.selected),total:this.state.initialLayers.length}}))," ",this.props.selected.name)),i().createElement(c.Row,{key:"styler",style:{marginBottom:10}},this.state.useDefaultStyle||t?null:this.props.stylers[this.getGeomType(this.props.selected)]),this.renderDisableStyleCustomization(t),i().createElement(c.Row,{key:"options"},(0,x.Ag)(this.props.selected)?this.annotationOptions():i().createElement(i().Fragment,null,i().createElement(c.Col,{xs:2},i().createElement("input",{"aria-label":"...",type:"checkbox",disabled:t,checked:t||this.state.useDefaultStyle,defaultChecked:t||this.state.useDefaultStyle,onChange:function(t){e.setState({useDefaultStyle:t.target.checked})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.defaultStyle"}))),i().createElement(c.Col,{xs:2},i().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.state.zoomOnShapefiles,onChange:function(t){e.setState({zoomOnShapefiles:t.target.checked})}})),i().createElement(c.Col,{style:{paddingLeft:0,paddingTop:1},xs:10},i().createElement("label",null,i().createElement(d.Z,{msgId:"shapefile.zoom"}))))),i().createElement(c.Row,null,i().createElement(c.ButtonToolbar,{style:{display:"flex",justifyContent:"flex-end"}},i().createElement(u.Z,{bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){e.props.setLayers(null)}},this.props.cancelMessage),i().createElement(u.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:function(){return e.props.onLayerSkipped(e.props.selected)}},this.props.skipMessage),i().createElement(u.Z,{bsStyle:"primary",bsSize:this.props.buttonSize,disabled:!this.props.selected,onClick:this.addToMap},1===this.props.layers.length?this.props.finishMessage:this.props.nextMessage))))}}],n&&Ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);qe(Xe,"propTypes",{bbox:K().array,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,onError:K().func,onSuccess:K().func,setLayers:K().func,addLayer:K().func,loadAnnotations:K().func,onSelectLayer:K().func,onLayerAdded:K().func,onLayerSkipped:K().func,onZoomSelected:K().func,updateBBox:K().func,errors:K().array,success:K().string,mapType:K().string,buttonSize:K().string,cancelMessage:K().object,addMessage:K().object,stylers:K().object,nextMessage:K().object,finishMessage:K().object,skipMessage:K().object}),qe(Xe,"contextTypes",{messages:K().object}),qe(Xe,"defaultProps",{mapType:"leaflet",buttonSize:"small",setLayers:function(){},addLayer:function(){},loadAnnotations:function(){},updateBBox:function(){},onZoomSelected:function(){},stylers:{},bbox:null});const $e=Xe;var Ke=n(61018);function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Je(){return Je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Je.apply(this,arguments)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nt(e,t)}function rt(e,t){if(t&&("object"===Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function at(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(l,e);var t,n,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ot(r);if(o){var n=ot(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function l(){return et(this,l),a.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e={Polygon:i().createElement(_e,null),MultiPolygon:i().createElement(_e,null),GeometryCollection:i().createElement(_e,null),LineString:i().createElement(Re,null),MultiLineString:i().createElement(Re,null),MultiPoint:i().createElement(Le,null),Point:i().createElement(Le,null)},t=i().createElement($e,Je({},this.props,{setLayers:this.props.setLayers,stylers:e,uploadMessage:i().createElement(Q.Z,{msgId:this.props.uploadMessage}),cancelMessage:i().createElement(Q.Z,{msgId:"shapefile.cancel"}),nextMessage:i().createElement(Q.Z,{msgId:"shapefile.next"}),finishMessage:i().createElement(Q.Z,{msgId:"shapefile.finish"}),skipMessage:i().createElement(Q.Z,{msgId:"shapefile.skip"})}));return this.props.layers?i().createElement(Ke.Z,{id:"import-style-dialog",onClose:this.props.onClose,modal:this.props.modal,show:!0,header:i().createElement(Q.Z,{msgId:"shapefile.title"})},t):t}}])&&tt(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i().Component);at(it,"propTypes",{id:K().string,layers:K().array,selected:K().object,style:K().object,shapeStyle:K().object,onError:K().func,setLayers:K().func,addShapeLayer:K().func,onSelectLayer:K().func,onLayerAdded:K().func,error:K().string,mapType:K().string,wrap:K().bool,wrapWithPanel:K().bool,panelStyle:K().object,panelClassName:K().string,visible:K().bool,modal:K().bool,onClose:K().func,closeGlyph:K().string,uploadMessage:K().string,buttonSize:K().string}),at(it,"defaultProps",{id:"mapstore-shapefile-upload",uploadMessage:"shapefile.placeholder",wrap:!0,modal:!0,wrapWithPanel:!1,panelStyle:{minWidth:"360px",zIndex:1995,position:"absolute",overflow:"visible",top:"30px",left:"calc(50% - 150px)"},panelClassName:"toolbar-panel",visible:!1,onClose:function(){},closeGlyph:"1-close",buttonSize:"small"});const lt=it;var st=n(881808),ct=n(800827);const ut=(0,r.compose)((0,r.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.layers;return t&&t.length>0})).exhaustMap((function(){return e.filter((function(e){var t=e.layers;return!t||0===t.length})).take(1).do((function(e){var t=e.onClose,n=void 0===t?function(){}:t;return n&&n()})).ignoreElements()})))})),(0,r.branch)((function(e){return!e.enabled}),r.renderNothing),(0,r.branch)((function(e){var t=e.layers;return!t||0===t.length}),(0,r.compose)((0,X.connect)((0,o.zB)({currentMap:ct.Od}),{loadMap:st.H0,loadMapInfo:st.I6}),(0,r.renderComponent)(q))))(lt)},481756:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(171703),o=n(805346);const a=(0,r.connect)((function(e){return{locale:e.locale&&e.locale.currentLocale,messages:e.locale&&e.locale.messages||[]}}))(o.Z)},183807:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(12440),o=n(187185),a=n.n(o),i=n(782904),l=n(727418),s=n.n(l);function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p={layers:null,errors:null,loading:!1,selected:null,bbox:[190,190,-190,-190]};const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r._p:return s()({},e,{error:t.message,success:null});case r.p5:var n=t.layers&&t.layers[0]?t.layers[0]:null,o=t.layers?t.errors:null;return s()({},e,{layers:t.layers,selected:n,bbox:[190,190,-190,-190],errors:o},n?{}:{success:null});case r.aW:return s()({},e,{errors:a()([].concat(c(e.errors||[]),[t.error]),(function(e,t){return(e.name&&e.name===t.name||e.filename&&e.filename===t.fileName)&&e.message===t.message})),success:null});case r.br:return s()({},e,{loading:t.status});case r.kn:return s()({},e,{selected:t.layer});case r.aE:var l=e.layers.filter((function(e){return t.layer.name!==e.name}),this),u=l&&l[0]?l[0]:null;return s()({},e,{layers:l,selected:u},u?{}:{bbox:[190,190,-190,-190]});case r.vm:return s()({},e,{bbox:t.bbox});case r.H4:return s()({},e,{success:t.message,errors:null,error:null});case i.kM:return"shapefile"===t.control?s()({},e,{errors:null,success:null}):e;case r._H:var f=e.layers.filter((function(e){return t.layer.name!==e.name}),this),y=f&&f[0]?f[0]:null;return s()({},e,{layers:f,selected:y,success:null});default:return e}}},318323:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(442416),o=n(727418),a=n.n(o);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={color:{r:0,g:0,b:255,a:1},width:3,fill:{r:0,g:0,b:255,a:.1},radius:10,marker:!1};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return t.type===r.H?a()({},e,i({},t.name,t.value)):e}},673781:(e,t,n)=>{"use strict";n.d(t,{sB:()=>h,_o:()=>g,cM:()=>P,Cq:()=>U,cQ:()=>V,dm:()=>q});var r=n(22222),o=n(675110),a=n(800827),i=n(93152),l=n(307877),s=n(91175),c=n.n(s),u=n(227361),p=n.n(u),f=n(727418),y=n.n(f),d=n(737275);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=(0,r.P1)([o.l2],(function(e){return c()(e.filter((function(e){return"annotations"===e.id})))})),g=function(e){return p()(e,"annotations.config.multiGeometry",!1)},O=function(e){return p()(e,"annotations.removing")},v=function(e){return p()(e,"annotations.format")},E=function(e){return p()(e,"annotations.aeronauticalOptions")},S=function(e){return p()(e,"annotations.showUnsavedChangesModal",!1)},T=function(e){return p()(e,"annotations.showUnsavedStyleModal",!1)},N=function(e){return p()(e,"annotations.showUnsavedGeometryModal",!1)},A=function(e){return p()(e,"annotations.showDeleteFeatureModal",!1)},w=function(e){return!!p()(e,"annotations.closing")},P=function(e){return p()(e,"annotations.editing")},j=function(e){return p()(e,"annotations.editGeometry",!0)},I=function(e){return p()(e,"annotations.featureType")},x=function(e){return p()(e,"annotations.coordinateEditorEnabled")},C=function(e){return!!p()(e,"annotations.drawing")},_=function(e){return p()(e,"annotations.stylerType")},L=function(e){return p()(e,"annotations.drawingText")},R=function(e){return p()(e,"annotations.editedFields",{})},D=function(e){return!!p()(e,"annotations.styling")},M=function(e){return p()(e,"annotations.selected",null)},k=function(e){return p()(e,"annotations.unsavedChanges",!1)},G=function(e){return p()(e,"annotations.unsavedGeometry",!1)},z=function(e){return p()(e,"annotations.unsavedStyle",!1)},Z=function(e){return p()(e,"annotations.validationErrors",{})},F=function(e){return p()(e,"annotations.config",{})},B=function(e){return p()(e,"annotations.symbolList",[])},U=function(e){return p()(e,"annotations.symbolErrors",[])},H=function(e){return(P(e)?"editing":h(e)&&function(e){return p()(e,"annotations.current")}(e)&&"detail")||"list"},W=function(e){return p()(e,"annotations.showAgain",!1)},Y=function(e){return p()(e,"annotations.showPopupWarning",!0)},V=function(e){return y()({},{symbolErrors:U(e),showEdit:(0,i.m6)(e),canEdit:j(e),mouseHoverEvents:(0,l.Qp)(e),closing:w(e),format:v(e)||(0,d.u8)("defaultCoordinateFormat"),aeronauticalOptions:E(e),config:F(e),drawing:C(e),drawingText:L(e),errors:Z(e),editing:P(e),coordinateEditorEnabled:x(e),editedFields:R(e),mode:H(e),selected:M(e),featureType:I(e),removing:O(e),mapProjection:(0,a.uy)(e),showUnsavedChangesModal:S(e),showDeleteFeatureModal:A(e),showUnsavedGeometryModal:N(e),showUnsavedStyleModal:T(e),stylerType:_(e),styling:D(e),unsavedChanges:k(e),unsavedGeometry:G(e),unsavedStyle:z(e),symbolList:B(e),showAgain:W(e),showPopupWarning:Y(e)})},q=(0,r.P1)([V,function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.annotations||{})},h,H],(function(e,t,n,r){return y()({},{format:t.format,aeronauticalOptions:t.aeronauticalOptions,removing:t.removing,showUnsavedChangesModal:t.showUnsavedChangesModal,showUnsavedGeometryModal:t.showUnsavedGeometryModal,showUnsavedStyleModal:t.showUnsavedStyleModal,showDeleteFeatureModal:t.showDeleteFeatureModal,closing:!!t.closing,mode:r,annotations:n&&n.features||[],current:t.current||null,editing:e.editing,selected:e.selected,filter:t.filter||"",defaultStyles:t.defaultStyles,loading:t.loading},e.config?{config:e.config}:{})}));(0,r.P1)([q],(function(e){var t=e.current;return{annotation:c()(e.annotations.filter((function(e){return e.properties.id===t})))}}))},105076:(e,t,n)=>{var r=n(989881);e.exports=function(e,t){var n;return r(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n}},359704:(e,t,n)=>{var r=n(282908),o=n(267206),a=n(105076),i=n(701469),l=n(816612);e.exports=function(e,t,n){var s=i(e)?r:a;return n&&l(e,t,n)&&(t=void 0),s(e,o(t,3))}}}]);